!function (t, e) { "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Phylocanvas = e() : t.Phylocanvas = e() }(this, function () {
    return function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "", e(0) }([function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } n(1); var i = n(2), a = r(i), o = n(4), s = r(o), l = n(5), c = r(l), h = n(6), u = r(h), f = n(3), d = r(f); d["default"].plugin(a["default"]), d["default"].plugin(s["default"]), d["default"].plugin(c["default"]), d["default"].plugin(u["default"]), t.exports = d["default"] }, function (t, e) { !function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "", e(0) }([function (t, e, n) { n(1), n(50), n(59), n(65), n(67), n(76) }, function (t, e, n) { "use strict"; var r = n(2), i = n(3), a = n(4), o = n(6), s = n(16), l = n(20).KEY, c = n(5), h = n(21), u = n(22), f = n(17), d = n(23), v = n(24), p = n(25), g = n(27), y = n(40), b = n(43), m = n(10), x = n(30), w = n(14), S = n(15), k = n(44), L = n(47), C = n(49), T = n(9), E = n(28), _ = C.f, M = T.f, P = L.f, O = r.Symbol, A = r.JSON, F = A && A.stringify, N = "prototype", j = d("_hidden"), R = d("toPrimitive"), z = {}.propertyIsEnumerable, B = h("symbol-registry"), I = h("symbols"), U = Object[N], H = "function" == typeof O, D = r.QObject, W = !D || !D[N] || !D[N].findChild, X = a && c(function () { return 7 != k(M({}, "a", { get: function () { return M(this, "a", { value: 7 }).a } })).a }) ? function (t, e, n) { var r = _(U, e); r && delete U[e], M(t, e, n), r && t !== U && M(U, e, r) } : M, Y = function (t) { var e = I[t] = k(O[N]); return e._k = t, e }, Q = H && "symbol" == typeof O.iterator ? function (t) { return "symbol" == typeof t } : function (t) { return t instanceof O }, q = function (t, e, n) { return m(t), e = w(e, !0), m(n), i(I, e) ? (n.enumerable ? (i(t, j) && t[j][e] && (t[j][e] = !1), n = k(n, { enumerable: S(0, !1) })) : (i(t, j) || M(t, j, S(1, {})), t[j][e] = !0), X(t, e, n)) : M(t, e, n) }, G = function (t, e) { m(t); for (var n, r = y(e = x(e)), i = 0, a = r.length; a > i;)q(t, n = r[i++], e[n]); return t }, Z = function (t, e) { return void 0 === e ? k(t) : G(k(t), e) }, K = function (t) { var e = z.call(this, t = w(t, !0)); return e || !i(this, t) || !i(I, t) || i(this, j) && this[j][t] ? e : !0 }, J = function (t, e) { var n = _(t = x(t), e = w(e, !0)); return !n || !i(I, e) || i(t, j) && t[j][e] || (n.enumerable = !0), n }, $ = function (t) { for (var e, n = P(x(t)), r = [], a = 0; n.length > a;)i(I, e = n[a++]) || e == j || e == l || r.push(e); return r }, V = function (t) { for (var e, n = P(x(t)), r = [], a = 0; n.length > a;)i(I, e = n[a++]) && r.push(I[e]); return r }; H || (O = function () { if (this instanceof O) throw TypeError("Symbol is not a constructor!"); var t = f(arguments.length > 0 ? arguments[0] : void 0); return a && W && X(U, t, { configurable: !0, set: function (e) { i(this, j) && i(this[j], t) && (this[j][t] = !1), X(this, t, S(1, e)) } }), Y(t) }, s(O[N], "toString", function () { return this._k }), C.f = J, T.f = q, n(48).f = L.f = $, n(42).f = K, n(41).f = V, a && !n(26) && s(U, "propertyIsEnumerable", K, !0), v.f = function (t) { return Y(d(t)) }), o(o.G + o.W + o.F * !H, { Symbol: O }); for (var tt = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), et = 0; tt.length > et;)d(tt[et++]); for (var tt = E(d.store), et = 0; tt.length > et;)p(tt[et++]); o(o.S + o.F * !H, "Symbol", { "for": function (t) { return i(B, t += "") ? B[t] : B[t] = O(t) }, keyFor: function (t) { if (Q(t)) return g(B, t); throw TypeError(t + " is not a symbol!") }, useSetter: function () { W = !0 }, useSimple: function () { W = !1 } }), o(o.S + o.F * !H, "Object", { create: Z, defineProperty: q, defineProperties: G, getOwnPropertyDescriptor: J, getOwnPropertyNames: $, getOwnPropertySymbols: V }), A && o(o.S + o.F * (!H || c(function () { var t = O(); return "[null]" != F([t]) || "{}" != F({ a: t }) || "{}" != F(Object(t)) })), "JSON", { stringify: function (t) { if (void 0 !== t && !Q(t)) { for (var e, n, r = [t], i = 1; arguments.length > i;)r.push(arguments[i++]); return e = r[1], "function" == typeof e && (n = e), !n && b(e) || (e = function (t, e) { return n && (e = n.call(this, t, e)), Q(e) ? void 0 : e }), r[1] = e, F.apply(A, r) } } }), O[N][R] || n(8)(O[N], R, O[N].valueOf), u(O, "Symbol"), u(Math, "Math", !0), u(r.JSON, "JSON", !0) }, function (t, e) { var n = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = n) }, function (t, e) { var n = {}.hasOwnProperty; t.exports = function (t, e) { return n.call(t, e) } }, function (t, e, n) { t.exports = !n(5)(function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a }) }, function (t, e) { t.exports = function (t) { try { return !!t() } catch (e) { return !0 } } }, function (t, e, n) { var r = n(2), i = n(7), a = n(8), o = n(16), s = n(18), l = "prototype", c = function (t, e, n) { var h, u, f, d, v = t & c.F, p = t & c.G, g = t & c.S, y = t & c.P, b = t & c.B, m = p ? r : g ? r[e] || (r[e] = {}) : (r[e] || {})[l], x = p ? i : i[e] || (i[e] = {}), w = x[l] || (x[l] = {}); p && (n = e); for (h in n) u = !v && m && void 0 !== m[h], f = (u ? m : n)[h], d = b && u ? s(f, r) : y && "function" == typeof f ? s(Function.call, f) : f, m && o(m, h, f, t & c.U), x[h] != f && a(x, h, d), y && w[h] != f && (w[h] = f) }; r.core = i, c.F = 1, c.G = 2, c.S = 4, c.P = 8, c.B = 16, c.W = 32, c.U = 64, c.R = 128, t.exports = c }, function (t, e) { var n = t.exports = { version: "2.3.0" }; "number" == typeof __e && (__e = n) }, function (t, e, n) { var r = n(9), i = n(15); t.exports = n(4) ? function (t, e, n) { return r.f(t, e, i(1, n)) } : function (t, e, n) { return t[e] = n, t } }, function (t, e, n) { var r = n(10), i = n(12), a = n(14), o = Object.defineProperty; e.f = n(4) ? Object.defineProperty : function (t, e, n) { if (r(t), e = a(e, !0), r(n), i) try { return o(t, e, n) } catch (s) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported!"); return "value" in n && (t[e] = n.value), t } }, function (t, e, n) { var r = n(11); t.exports = function (t) { if (!r(t)) throw TypeError(t + " is not an object!"); return t } }, function (t, e) { t.exports = function (t) { return "object" == typeof t ? null !== t : "function" == typeof t } }, function (t, e, n) { t.exports = !n(4) && !n(5)(function () { return 7 != Object.defineProperty(n(13)("div"), "a", { get: function () { return 7 } }).a }) }, function (t, e, n) { var r = n(11), i = n(2).document, a = r(i) && r(i.createElement); t.exports = function (t) { return a ? i.createElement(t) : {} } }, function (t, e, n) { var r = n(11); t.exports = function (t, e) { if (!r(t)) return t; var n, i; if (e && "function" == typeof (n = t.toString) && !r(i = n.call(t))) return i; if ("function" == typeof (n = t.valueOf) && !r(i = n.call(t))) return i; if (!e && "function" == typeof (n = t.toString) && !r(i = n.call(t))) return i; throw TypeError("Can't convert object to primitive value") } }, function (t, e) { t.exports = function (t, e) { return { enumerable: !(1 & t), configurable: !(2 & t), writable: !(4 & t), value: e } } }, function (t, e, n) { var r = n(2), i = n(8), a = n(3), o = n(17)("src"), s = "toString", l = Function[s], c = ("" + l).split(s); n(7).inspectSource = function (t) { return l.call(t) }, (t.exports = function (t, e, n, s) { var l = "function" == typeof n; l && (a(n, "name") || i(n, "name", e)), t[e] !== n && (l && (a(n, o) || i(n, o, t[e] ? "" + t[e] : c.join(String(e)))), t === r ? t[e] = n : s ? t[e] ? t[e] = n : i(t, e, n) : (delete t[e], i(t, e, n))) })(Function.prototype, s, function () { return "function" == typeof this && this[o] || l.call(this) }) }, function (t, e) { var n = 0, r = Math.random(); t.exports = function (t) { return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++n + r).toString(36)) } }, function (t, e, n) { var r = n(19); t.exports = function (t, e, n) { if (r(t), void 0 === e) return t; switch (n) { case 1: return function (n) { return t.call(e, n) }; case 2: return function (n, r) { return t.call(e, n, r) }; case 3: return function (n, r, i) { return t.call(e, n, r, i) } }return function () { return t.apply(e, arguments) } } }, function (t, e) { t.exports = function (t) { if ("function" != typeof t) throw TypeError(t + " is not a function!"); return t } }, function (t, e, n) { var r = n(17)("meta"), i = n(11), a = n(3), o = n(9).f, s = 0, l = Object.isExtensible || function () { return !0 }, c = !n(5)(function () { return l(Object.preventExtensions({})) }), h = function (t) { o(t, r, { value: { i: "O" + ++s, w: {} } }) }, u = function (t, e) { if (!i(t)) return "symbol" == typeof t ? t : ("string" == typeof t ? "S" : "P") + t; if (!a(t, r)) { if (!l(t)) return "F"; if (!e) return "E"; h(t) } return t[r].i }, f = function (t, e) { if (!a(t, r)) { if (!l(t)) return !0; if (!e) return !1; h(t) } return t[r].w }, d = function (t) { return c && v.NEED && l(t) && !a(t, r) && h(t), t }, v = t.exports = { KEY: r, NEED: !1, fastKey: u, getWeak: f, onFreeze: d } }, function (t, e, n) { var r = n(2), i = "__core-js_shared__", a = r[i] || (r[i] = {}); t.exports = function (t) { return a[t] || (a[t] = {}) } }, function (t, e, n) { var r = n(9).f, i = n(3), a = n(23)("toStringTag"); t.exports = function (t, e, n) { t && !i(t = n ? t : t.prototype, a) && r(t, a, { configurable: !0, value: e }) } }, function (t, e, n) { var r = n(21)("wks"), i = n(17), a = n(2).Symbol, o = "function" == typeof a, s = t.exports = function (t) { return r[t] || (r[t] = o && a[t] || (o ? a : i)("Symbol." + t)) }; s.store = r }, function (t, e, n) { e.f = n(23) }, function (t, e, n) { var r = n(2), i = n(7), a = n(26), o = n(24), s = n(9).f; t.exports = function (t) { var e = i.Symbol || (i.Symbol = a ? {} : r.Symbol || {}); "_" == t.charAt(0) || t in e || s(e, t, { value: o.f(t) }) } }, function (t, e) { t.exports = !1 }, function (t, e, n) { var r = n(28), i = n(30); t.exports = function (t, e) { for (var n, a = i(t), o = r(a), s = o.length, l = 0; s > l;)if (a[n = o[l++]] === e) return n } }, function (t, e, n) { var r = n(29), i = n(39); t.exports = Object.keys || function (t) { return r(t, i) } }, function (t, e, n) { var r = n(3), i = n(30), a = n(34)(!1), o = n(38)("IE_PROTO"); t.exports = function (t, e) { var n, s = i(t), l = 0, c = []; for (n in s) n != o && r(s, n) && c.push(n); for (; e.length > l;)r(s, n = e[l++]) && (~a(c, n) || c.push(n)); return c } }, function (t, e, n) { var r = n(31), i = n(33); t.exports = function (t) { return r(i(t)) } }, function (t, e, n) { var r = n(32); t.exports = Object("z").propertyIsEnumerable(0) ? Object : function (t) { return "String" == r(t) ? t.split("") : Object(t) } }, function (t, e) { var n = {}.toString; t.exports = function (t) { return n.call(t).slice(8, -1) } }, function (t, e) { t.exports = function (t) { if (void 0 == t) throw TypeError("Can't call method on  " + t); return t } }, function (t, e, n) { var r = n(30), i = n(35), a = n(37); t.exports = function (t) { return function (e, n, o) { var s, l = r(e), c = i(l.length), h = a(o, c); if (t && n != n) { for (; c > h;)if (s = l[h++], s != s) return !0 } else for (; c > h; h++)if ((t || h in l) && l[h] === n) return t || h || 0; return !t && -1 } } }, function (t, e, n) { var r = n(36), i = Math.min; t.exports = function (t) { return t > 0 ? i(r(t), 9007199254740991) : 0 } }, function (t, e) { var n = Math.ceil, r = Math.floor; t.exports = function (t) { return isNaN(t = +t) ? 0 : (t > 0 ? r : n)(t) } }, function (t, e, n) { var r = n(36), i = Math.max, a = Math.min; t.exports = function (t, e) { return t = r(t), 0 > t ? i(t + e, 0) : a(t, e) } }, function (t, e, n) { var r = n(21)("keys"), i = n(17); t.exports = function (t) { return r[t] || (r[t] = i(t)) } }, function (t, e) { t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",") }, function (t, e, n) { var r = n(28), i = n(41), a = n(42); t.exports = function (t) { var e = r(t), n = i.f; if (n) for (var o, s = n(t), l = a.f, c = 0; s.length > c;)l.call(t, o = s[c++]) && e.push(o); return e } }, function (t, e) { e.f = Object.getOwnPropertySymbols }, function (t, e) { e.f = {}.propertyIsEnumerable }, function (t, e, n) { var r = n(32); t.exports = Array.isArray || function (t) { return "Array" == r(t) } }, function (t, e, n) { var r = n(10), i = n(45), a = n(39), o = n(38)("IE_PROTO"), s = function () { }, l = "prototype", c = function () { var t, e = n(13)("iframe"), r = a.length, i = ">"; for (e.style.display = "none", n(46).appendChild(e), e.src = "javascript:", t = e.contentWindow.document, t.open(), t.write("<script>document.F=Object</script" + i), t.close(), c = t.F; r--;)delete c[l][a[r]]; return c() }; t.exports = Object.create || function (t, e) { var n; return null !== t ? (s[l] = r(t), n = new s, s[l] = null, n[o] = t) : n = c(), void 0 === e ? n : i(n, e) } }, function (t, e, n) { var r = n(9), i = n(10), a = n(28); t.exports = n(4) ? Object.defineProperties : function (t, e) { i(t); for (var n, o = a(e), s = o.length, l = 0; s > l;)r.f(t, n = o[l++], e[n]); return t } }, function (t, e, n) { t.exports = n(2).document && document.documentElement }, function (t, e, n) { var r = n(30), i = n(48).f, a = {}.toString, o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [], s = function (t) { try { return i(t) } catch (e) { return o.slice() } }; t.exports.f = function (t) { return o && "[object Window]" == a.call(t) ? s(t) : i(r(t)) } }, function (t, e, n) { var r = n(29), i = n(39).concat("length", "prototype"); e.f = Object.getOwnPropertyNames || function (t) { return r(t, i) } }, function (t, e, n) { var r = n(42), i = n(15), a = n(30), o = n(14), s = n(3), l = n(12), c = Object.getOwnPropertyDescriptor; e.f = n(4) ? c : function (t, e) { if (t = a(t), e = o(e, !0), l) try { return c(t, e) } catch (n) { } return s(t, e) ? i(!r.f.call(t, e), t[e]) : void 0 } }, function (t, e, n) { "use strict"; var r = n(18), i = n(6), a = n(51), o = n(52), s = n(53), l = n(35), c = n(55), h = n(56); i(i.S + i.F * !n(58)(function (t) { Array.from(t) }), "Array", { from: function (t) { var e, n, i, u, f = a(t), d = "function" == typeof this ? this : Array, v = arguments.length, p = v > 1 ? arguments[1] : void 0, g = void 0 !== p, y = 0, b = h(f); if (g && (p = r(p, v > 2 ? arguments[2] : void 0, 2)), void 0 == b || d == Array && s(b)) for (e = l(f.length), n = new d(e); e > y; y++)c(n, y, g ? p(f[y], y) : f[y]); else for (u = b.call(f), n = new d; !(i = u.next()).done; y++)c(n, y, g ? o(u, p, [i.value, y], !0) : i.value); return n.length = y, n } }) }, function (t, e, n) { var r = n(33); t.exports = function (t) { return Object(r(t)) } }, function (t, e, n) { var r = n(10); t.exports = function (t, e, n, i) { try { return i ? e(r(n)[0], n[1]) : e(n) } catch (a) { var o = t["return"]; throw void 0 !== o && r(o.call(t)), a } } }, function (t, e, n) { var r = n(54), i = n(23)("iterator"), a = Array.prototype; t.exports = function (t) { return void 0 !== t && (r.Array === t || a[i] === t) } }, function (t, e) { t.exports = {} }, function (t, e, n) { "use strict"; var r = n(9), i = n(15); t.exports = function (t, e, n) { e in t ? r.f(t, e, i(0, n)) : t[e] = n } }, function (t, e, n) { var r = n(57), i = n(23)("iterator"), a = n(54); t.exports = n(7).getIteratorMethod = function (t) { return void 0 != t ? t[i] || t["@@iterator"] || a[r(t)] : void 0 } }, function (t, e, n) { var r = n(32), i = n(23)("toStringTag"), a = "Arguments" == r(function () { return arguments }()), o = function (t, e) { try { return t[e] } catch (n) { } }; t.exports = function (t) { var e, n, s; return void 0 === t ? "Undefined" : null === t ? "Null" : "string" == typeof (n = o(e = Object(t), i)) ? n : a ? r(e) : "Object" == (s = r(e)) && "function" == typeof e.callee ? "Arguments" : s } }, function (t, e, n) { var r = n(23)("iterator"), i = !1; try { var a = [7][r](); a["return"] = function () { i = !0 }, Array.from(a, function () { throw 2 }) } catch (o) { } t.exports = function (t, e) { if (!e && !i) return !1; var n = !1; try { var a = [7], o = a[r](); o.next = function () { return { done: n = !0 } }, a[r] = function () { return o }, t(a) } catch (s) { } return n } }, function (t, e, n) { "use strict"; var r = n(60), i = n(61), a = n(54), o = n(30); t.exports = n(62)(Array, "Array", function (t, e) { this._t = o(t), this._i = 0, this._k = e }, function () { var t = this._t, e = this._k, n = this._i++; return !t || n >= t.length ? (this._t = void 0, i(1)) : "keys" == e ? i(0, n) : "values" == e ? i(0, t[n]) : i(0, [n, t[n]]) }, "values"), a.Arguments = a.Array, r("keys"), r("values"), r("entries") }, function (t, e, n) { var r = n(23)("unscopables"), i = Array.prototype; void 0 == i[r] && n(8)(i, r, {}), t.exports = function (t) { i[r][t] = !0 } }, function (t, e) { t.exports = function (t, e) { return { value: e, done: !!t } } }, function (t, e, n) { "use strict"; var r = n(26), i = n(6), a = n(16), o = n(8), s = n(3), l = n(54), c = n(63), h = n(22), u = n(64), f = n(23)("iterator"), d = !([].keys && "next" in [].keys()), v = "@@iterator", p = "keys", g = "values", y = function () { return this }; t.exports = function (t, e, n, b, m, x, w) { c(n, e, b); var S, k, L, C = function (t) { if (!d && t in M) return M[t]; switch (t) { case p: return function () { return new n(this, t) }; case g: return function () { return new n(this, t) } }return function () { return new n(this, t) } }, T = e + " Iterator", E = m == g, _ = !1, M = t.prototype, P = M[f] || M[v] || m && M[m], O = P || C(m), A = m ? E ? C("entries") : O : void 0, F = "Array" == e ? M.entries || P : P; if (F && (L = u(F.call(new t)), L !== Object.prototype && (h(L, T, !0), r || s(L, f) || o(L, f, y))), E && P && P.name !== g && (_ = !0, O = function () { return P.call(this) }), r && !w || !d && !_ && M[f] || o(M, f, O), l[e] = O, l[T] = y, m) if (S = { values: E ? O : C(g), keys: x ? O : C(p), entries: A }, w) for (k in S) k in M || a(M, k, S[k]); else i(i.P + i.F * (d || _), e, S); return S } }, function (t, e, n) { "use strict"; var r = n(44), i = n(15), a = n(22), o = {}; n(8)(o, n(23)("iterator"), function () { return this }), t.exports = function (t, e, n) { t.prototype = r(o, { next: i(1, n) }), a(t, e + " Iterator") } }, function (t, e, n) { var r = n(3), i = n(51), a = n(38)("IE_PROTO"), o = Object.prototype; t.exports = Object.getPrototypeOf || function (t) { return t = i(t), r(t, a) ? t[a] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? o : null } }, function (t, e, n) { "use strict"; var r = n(66)(!0); n(62)(String, "String", function (t) { this._t = String(t), this._i = 0 }, function () { var t, e = this._t, n = this._i; return n >= e.length ? { value: void 0, done: !0 } : (t = r(e, n), this._i += t.length, { value: t, done: !1 }) }) }, function (t, e, n) { var r = n(36), i = n(33); t.exports = function (t) { return function (e, n) { var a, o, s = String(i(e)), l = r(n), c = s.length; return 0 > l || l >= c ? t ? "" : void 0 : (a = s.charCodeAt(l), 55296 > a || a > 56319 || l + 1 === c || (o = s.charCodeAt(l + 1)) < 56320 || o > 57343 ? t ? s.charAt(l) : a : t ? s.slice(l, l + 2) : (a - 55296 << 10) + (o - 56320) + 65536) } } }, function (t, e, n) { "use strict"; var r = n(68); t.exports = n(73)("Set", function (t) { return function () { return t(this, arguments.length > 0 ? arguments[0] : void 0) } }, { add: function (t) { return r.def(this, t = 0 === t ? 0 : t, t) } }, r) }, function (t, e, n) { "use strict"; var r = n(9).f, i = n(44), a = (n(8), n(69)), o = n(18), s = n(70), l = n(33), c = n(71), h = n(62), u = n(61), f = n(72), d = n(4), v = n(20).fastKey, p = d ? "_s" : "size", g = function (t, e) { var n, r = v(e); if ("F" !== r) return t._i[r]; for (n = t._f; n; n = n.n)if (n.k == e) return n }; t.exports = { getConstructor: function (t, e, n, h) { var u = t(function (t, r) { s(t, u, e, "_i"), t._i = i(null), t._f = void 0, t._l = void 0, t[p] = 0, void 0 != r && c(r, n, t[h], t) }); return a(u.prototype, { clear: function () { for (var t = this, e = t._i, n = t._f; n; n = n.n)n.r = !0, n.p && (n.p = n.p.n = void 0), delete e[n.i]; t._f = t._l = void 0, t[p] = 0 }, "delete": function (t) { var e = this, n = g(e, t); if (n) { var r = n.n, i = n.p; delete e._i[n.i], n.r = !0, i && (i.n = r), r && (r.p = i), e._f == n && (e._f = r), e._l == n && (e._l = i), e[p]-- } return !!n }, forEach: function (t) { s(this, u, "forEach"); for (var e, n = o(t, arguments.length > 1 ? arguments[1] : void 0, 3); e = e ? e.n : this._f;)for (n(e.v, e.k, this); e && e.r;)e = e.p }, has: function (t) { return !!g(this, t) } }), d && r(u.prototype, "size", { get: function () { return l(this[p]) } }), u }, def: function (t, e, n) { var r, i, a = g(t, e); return a ? a.v = n : (t._l = a = { i: i = v(e, !0), k: e, v: n, p: r = t._l, n: void 0, r: !1 }, t._f || (t._f = a), r && (r.n = a), t[p]++ , "F" !== i && (t._i[i] = a)), t }, getEntry: g, setStrong: function (t, e, n) { h(t, e, function (t, e) { this._t = t, this._k = e, this._l = void 0 }, function () { for (var t = this, e = t._k, n = t._l; n && n.r;)n = n.p; return t._t && (t._l = n = n ? n.n : t._t._f) ? "keys" == e ? u(0, n.k) : "values" == e ? u(0, n.v) : u(0, [n.k, n.v]) : (t._t = void 0, u(1)) }, n ? "entries" : "values", !n, !0), f(e) } } }, function (t, e, n) { var r = n(16); t.exports = function (t, e, n) { for (var i in e) r(t, i, e[i], n); return t } }, function (t, e) { t.exports = function (t, e, n, r) { if (!(t instanceof e) || void 0 !== r && r in t) throw TypeError(n + ": incorrect invocation!"); return t } }, function (t, e, n) { var r = n(18), i = n(52), a = n(53), o = n(10), s = n(35), l = n(56); t.exports = function (t, e, n, c, h) { var u, f, d, v = h ? function () { return t } : l(t), p = r(n, c, e ? 2 : 1), g = 0; if ("function" != typeof v) throw TypeError(t + " is not iterable!"); if (a(v)) for (u = s(t.length); u > g; g++)e ? p(o(f = t[g])[0], f[1]) : p(t[g]); else for (d = v.call(t); !(f = d.next()).done;)i(d, p, f.value, e) } }, function (t, e, n) { "use strict"; var r = n(2), i = n(9), a = n(4), o = n(23)("species"); t.exports = function (t) { var e = r[t]; a && e && !e[o] && i.f(e, o, { configurable: !0, get: function () { return this } }) } }, function (t, e, n) { "use strict"; var r = n(2), i = n(6), a = n(16), o = n(69), s = n(20), l = n(71), c = n(70), h = n(11), u = n(5), f = n(58), d = n(22), v = n(74); t.exports = function (t, e, n, p, g, y) { var b = r[t], m = b, x = g ? "set" : "add", w = m && m.prototype, S = {}, k = function (t) { var e = w[t]; a(w, t, "delete" == t ? function (t) { return y && !h(t) ? !1 : e.call(this, 0 === t ? 0 : t) } : "has" == t ? function (t) { return y && !h(t) ? !1 : e.call(this, 0 === t ? 0 : t) } : "get" == t ? function (t) { return y && !h(t) ? void 0 : e.call(this, 0 === t ? 0 : t) } : "add" == t ? function (t) { return e.call(this, 0 === t ? 0 : t), this } : function (t, n) { return e.call(this, 0 === t ? 0 : t, n), this }) }; if ("function" == typeof m && (y || w.forEach && !u(function () { (new m).entries().next() }))) { var L = new m, C = L[x](y ? {} : -0, 1) != L, T = u(function () { L.has(1) }), E = f(function (t) { new m(t) }), _ = !y && u(function () { for (var t = new m, e = 5; e--;)t[x](e, e); return !t.has(-0) }); E || (m = e(function (e, n) { c(e, m, t); var r = v(new b, e, m); return void 0 != n && l(n, g, r[x], r), r }), m.prototype = w, w.constructor = m), (T || _) && (k("delete"), k("has"), g && k("get")), (_ || C) && k(x), y && w.clear && delete w.clear } else m = p.getConstructor(e, t, g, x), o(m.prototype, n), s.NEED = !0; return d(m, t), S[t] = m, i(i.G + i.W + i.F * (m != b), S), y || p.setStrong(m, t, g), m } }, function (t, e, n) { var r = n(11), i = n(75).set; t.exports = function (t, e, n) { var a, o = e.constructor; return o !== n && "function" == typeof o && (a = o.prototype) !== n.prototype && r(a) && i && i(t, a), t } }, function (t, e, n) { var r = n(11), i = n(10), a = function (t, e) { if (i(t), !r(e) && null !== e) throw TypeError(e + ": can't set as prototype!") }; t.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function (t, e, r) { try { r = n(18)(Function.call, n(49).f(Object.prototype, "__proto__").set, 2), r(t, []), e = !(t instanceof Array) } catch (i) { e = !0 } return function (t, n) { return a(t, n), e ? t.__proto__ = n : r(t, n), t } }({}, !1) : void 0), check: a } }, function (t, e, n) { var r = n(6); r(r.S + r.F, "Object", { assign: n(77) }) }, function (t, e, n) { "use strict"; var r = n(28), i = n(41), a = n(42), o = n(51), s = n(31), l = Object.assign; t.exports = !l || n(5)(function () { var t = {}, e = {}, n = Symbol(), r = "abcdefghijklmnopqrst"; return t[n] = 7, r.split("").forEach(function (t) { e[t] = t }), 7 != l({}, t)[n] || Object.keys(l({}, e)).join("") != r }) ? function (t, e) { for (var n = o(t), l = arguments.length, c = 1, h = i.f, u = a.f; l > c;)for (var f, d = s(arguments[c++]), v = h ? r(d).concat(h(d)) : r(d), p = v.length, g = 0; p > g;)u.call(d, f = v[g++]) && (n[f] = d[f]); return n } : l }]) }, function (t, e, n) { !function (e, r) { t.exports = r(n(3)) }(this, function (t) { return function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "", e(0) }([function (t, e, n) { "use strict"; function r(t) { if (Array.isArray(t)) { for (var e = 0, n = Array(t.length); e < t.length; e++)n[e] = t[e]; return n } return Array.from(t) } function i(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function a(t) { t(this, "createTree", function (t, e) { var n = t.apply(void 0, r(e)), i = o(e, 2), a = i[1], s = void 0 === a ? {} : a; if (s.history || "undefined" == typeof s.history) { var l = s.history && "undefined" != typeof s.history.collapsed; n.historySnapshots = [], n.history = new y(n, l ? s.history.collapsed : !0) } return n }), t(l.Tree, "resizeToContainer", function (t) { return this.history && this.history.resizeTree ? void this.history.resizeTree() : t.apply(this) }), this.History = y } Object.defineProperty(e, "__esModule", { value: !0 }); var o = function () { function t(t, e) { var n = [], r = !0, i = !1, a = void 0; try { for (var o, s = t[Symbol.iterator](); !(r = (o = s.next()).done) && (n.push(o.value), !e || n.length !== e); r = !0); } catch (l) { i = !0, a = l } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } return n } return function (e, n) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, n); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(), s = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var r = e[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } return function (e, n, r) { return n && t(e.prototype, n), r && t(e, r), e } }(); e["default"] = a; var l = n(1), c = l.utils.dom, h = c.addClass, u = c.hasClass, f = c.removeClass, d = l.utils.events, v = d.fireEvent, p = d.addEvent, g = d.killEvent, y = function () { function t(e, n) { var r = this; i(this, t), this.tree = e, this.injectCss(), this.div = this.createDiv(e.containerElement), this.tree.addListener("subtree", function (t) { var e = t.node; return r.addSnapshot(e) }), this.tree.addListener("loaded", function () { return r.addSnapshot(r.tree.root.id) }), this.tree.addListener("typechanged", function () { return r.addSnapshot(r.tree.root.id) }), n ? this.collapse() : this.expand() } return s(t, [{ key: "collapse", value: function () { h(this.div, "collapsed"), this.toggleDiv.firstChild.data = ">", this.resizeTree(), this.tree.draw() } }, { key: "expand", value: function () { f(this.div, "collapsed"), this.toggleDiv.firstChild.data = "<", this.resizeTree(), this.tree.draw() } }, { key: "isCollapsed", value: function () { return u(this.div, "collapsed") } }, { key: "toggle", value: function () { this.isCollapsed() ? this.expand() : this.collapse(), v(this.tree.containerElement, "historytoggle", { isOpen: !this.isCollapsed() }) } }, { key: "createDiv", value: function (t) { var e = document.createElement("div"); e.className = "pc-history", p(e, "click", g), p(e, "contextmenu", g); var n = document.createElement("div"); n.innerHTML = "History", n.className = "pc-history-title", e.appendChild(n); var r = document.createElement("div"); r.appendChild(document.createTextNode("<")), r.className = "toggle", p(r, "click", this.toggle.bind(this)), e.appendChild(r), this.toggleDiv = r; var i = document.createElement("ul"); return i.className = "pc-history-snapshots", e.appendChild(i), this.snapshotList = i, t.appendChild(e), e } }, { key: "resizeTree", value: function () { var t = this.tree; this.width = this.div.offsetWidth, t.setSize(t.containerElement.offsetWidth - this.width, t.containerElement.offsetHeight), this.isCollapsed() ? t.containerElement.getElementsByTagName("canvas")[0].style.marginLeft = this.width + "px" : t.containerElement.getElementsByTagName("canvas")[0].style.marginLeft = "20%" } }, { key: "addSnapshot", value: function (t) { if (t) { var e = "phylocanvas-history-", n = this.tree.treeType, r = !1; if (this.tree.historySnapshots.forEach(function (i) { i.style.background = "transparent", i.id === e + t && i.getAttribute("data-tree-type") === n && (r = !0, i.style.background = "lightblue") }), !r) { var i = this.tree.getPngUrl(), a = document.createElement("li"), o = document.createElement("img"); o.width = this.width, o.src = i, o.id = e + t, o.setAttribute("data-tree-type", this.tree.treeType), o.style.background = "lightblue", this.tree.historySnapshots.push(o), a.appendChild(o), this.snapshotList.appendChild(a), p(o, "click", this.goBackTo.bind(this)) } } } }, { key: "clear", value: function () { for (var t = this.snapshotList.getElementsByTagName("li"), e = t.length; e--;)this.snapshotList.removeChild(t[0]); this.tree.historySnapshots.length = 0 } }, { key: "goBackTo", value: function (t) { var e = t.target, n = e.id.replace("phylocanvas-history-", ""); this.tree.setTreeType(e.getAttribute("data-tree-type"), !0), this.tree.redrawFromBranch(this.tree.originalTree.branches[n]) } }, { key: "injectCss", value: function () { var t = ".pc-history { position: absolute; top: 0; bottom: 0; left: 0; box-sizing: border-box; width: 20%; overflow: hidden; background: #EEE }.pc-history .pc-history-title { box-sizing: border-box; height: 20px; text-align: center; font-size: 13px; color: #666; padding: 2px; border-bottom: 1px solid #bbb }.pc-history .toggle { position: absolute; top: 0; right: 0; padding: 2px 8px; cursor: pointer; border-top-left-radius: 50%; border-bottom-left-radius: 50%; background-color: #666; color: #FFF; box-sizing: border-box; height: 20px; }.pc-history.collapsed .toggle { border-radius: 0 50% 50% 0 }.pc-history .toggle:hover { background-color: #FFF; color: #CCC }.pc-history.collapsed { width: 25px }.pc-history.collapsed .pc-history-snapshots { display: none }.pc-history.collapsed .pc-history-title { writing-mode: sideways-rl; -webkit-writing-mode: vertical-rl; margin-top: 30px; background: 0 0; color: #666; letter-spacing: 1.2px; border-bottom: none }.pc-history-snapshots { position: absolute; top: 20px; bottom: 0; margin: 0; padding: 0; overflow-x: hidden; overflow-y: scroll; }.pc-history-snapshots li { list-style: outside none none }.pc-history img { border: 0px solid #CCC; border-top-width: 1px; cursor: pointer; width: 100%; box-sizing: border-box; transition: background-color .25s ease; display: block }.pc-history img:hover { background-color: #fff }", e = document.head || document.getElementsByTagName("head")[0], n = document.createElement("style"); n.type = "text/css", n.styleSheet ? n.styleSheet.cssText = t : n.appendChild(document.createTextNode(t)), e.appendChild(n) } }]), t }() }, function (e, n) { e.exports = t }]) }) }, function (t, e, n) {
        !function (e, n) { t.exports = n() }(this, function () {
            return function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "/dist/", e(0) }([function (t, e, n) { "use strict"; function r(t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e["default"] = t, e } function i(t) { return t && t.__esModule ? t : { "default": t } } function a(t, e, n) { var r = t[e] ? t : t.prototype, i = r[e]; r[e] = function () { for (var t = arguments.length, e = Array(t), r = 0; t > r; r++)e[r] = arguments[r]; return n.call(this, i, e) } } function o(t) { t.call(this, a) } function s(t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1]; return new c["default"](t, e) } Object.defineProperty(e, "__esModule", { value: !0 }), e.utils = e.nodeRenderers = e.treeTypes = e.Parser = e.Tooltip = e.Branch = e.Tree = void 0; var l = n(1), c = i(l), h = n(7), u = i(h), f = n(9), d = i(f), v = n(30), p = i(v), g = n(11), y = i(g), b = n(8), m = i(b), x = n(2), w = r(x); e.Tree = c["default"], e.Branch = u["default"], e.Tooltip = d["default"], e.Parser = p["default"], e.treeTypes = y["default"], e.nodeRenderers = m["default"], e.utils = w, e["default"] = { plugin: o, createTree: s } }, function (t, e, n) {
                "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } function i(t) { if (Array.isArray(t)) { for (var e = 0, n = Array(t.length); e < t.length; e++)n[e] = t[e]; return n } return Array.from(t) } function a(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }); var o = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var r = e[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } return function (e, n, r) { return n && t(e.prototype, n), r && t(e, r), e } }(), s = n(2), l = n(7), c = r(l), h = n(9), u = n(10), f = r(u), d = n(11), v = r(d), p = n(29), g = r(p), y = s.dom.addClass, b = s.events.fireEvent, m = s.events.addEvent, x = s.canvas.getPixelRatio, w = s.canvas.translateClick, S = function () {
                    function t(e) { var n = this, r = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1]; a(this, t), this.containerElement = "string" == typeof e ? document.getElementById(e) : e, y(this.containerElement, "pc-container"), this.branches = {}, this.leaves = [], this.root = !1, this.stringRepresentation = "", this.backColour = !1, this.originalTree = {}, "static" === window.getComputedStyle(this.containerElement).position && (this.containerElement.style.position = "relative"), this.containerElement.style.boxSizing = "border-box"; var i = document.createElement("canvas"); i.id = (this.containerElement.id || "") + "__canvas", i.className = "phylocanvas", i.style.position = "relative", i.height = e.offsetHeight || 400, i.width = e.offsetWidth || 400, i.style.zIndex = "1", this.containerElement.appendChild(i), this.defaultCollapsed = {}, this.tooltip = new h.ChildNodesTooltip(this), this.drawn = !1, this.highlighters = [], this.zoom = 1, this.zoomFactor = .2, this.disableZoom = !1, this.fillCanvas = !1, this.branchScaling = !0, this.currentBranchScale = 1, this.branchScalingStep = 1.2, this.pickedup = !1, this.dragging = !1, this.startx = null, this.starty = null, this.pickedup = !1, this.baseNodeSize = 1, this.curx = null, this.cury = null, this.origx = null, this.origy = null, this.canvas = i.getContext("2d"), this.canvas.canvas.onselectstart = function () { return !1 }, this.canvas.fillStyle = "#000000", this.canvas.strokeStyle = "#000000", this.canvas.save(), this.offsetx = this.canvas.canvas.width / 2, this.offsety = this.canvas.canvas.height / 2, this.selectedColour = "rgba(49,151,245,1)", this.highlightColour = "rgba(49,151,245,1)", this.highlightWidth = 4, this.highlightSize = 2, this.selectedNodeSizeIncrease = 0, this.branchColour = "rgba(0,0,0,1)", this.branchScalar = 1, this.padding = 50, this.labelPadding = 5, this.multiSelect = !0, this.clickFlag = "selected", this.clickFlagPredicate = function () { return !0 }, this.hoverLabel = !1, this.internalNodesSelectable = !0, this.showLabels = !0, this.showBootstraps = !1, this.setTreeType("radial"), this.maxBranchLength = 0, this.lineWidth = 1, this.textSize = 7, this.font = "sans-serif", this.unselectOnClickAway = !0, this.useNavigator && (this.navigator = new f["default"](this)), this.alignLabels = !1, this.farthestNodeFromRootX = 0, this.farthestNodeFromRootY = 0, this.maxLabelLength = {}, Object.assign(this, r), this.resizeToContainer(), this.addListener("click", this.clicked.bind(this)), this.addListener("mousedown", this.pickup.bind(this)), this.addListener("mouseup", this.drop.bind(this)), this.addListener("mouseout", this.drop.bind(this)), m(this.canvas.canvas, "mousemove", this.drag.bind(this)), this.disableZoom || (m(this.canvas.canvas, "mousewheel", this.scroll.bind(this)), m(this.canvas.canvas, "DOMMouseScroll", this.scroll.bind(this))), m(window, "resize", function () { n.resizeToContainer(), n.draw() }) } return o(t, [{ key: "setInitialCollapsedBranches", value: function () { var t, e, n = arguments.length <= 0 || void 0 === arguments[0] ? this.root : arguments[0]; if (t = n.getChildProperties("id"), t && t.length > this.defaultCollapsed.min && t.length < this.defaultCollapsed.max) return void (n.collapsed = !0); for (e = 0; e < n.children.length; e++)this.setInitialCollapsedBranches(n.children[e]) } }, {
                        key: "getNodeAtMousePosition", value: function (t) {
                            var e; return (e = this.root).clicked.apply(e, i(w(t, this)));
                        }
                    }, { key: "getSelectedNodeIds", value: function () { return this.getNodeIdsWithFlag("selected") } }, { key: "getNodeIdsWithFlag", value: function (t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1]; return this.leaves.reduce(function (n, r) { return r[t] === e && n.push(r.id), n }, []) } }, { key: "clicked", value: function (t) { var e; if (0 === t.button) { var n = []; if (this.dragging) return void (this.dragging = !1); if (!this.root) return !1; e = this.getNodeAtMousePosition(t); var r = this.multiSelect && (t.metaKey || t.ctrlKey); if (e && e.interactive) if (r) { if (e.leaf) e[this.clickFlag] = !e[this.clickFlag]; else if (this.internalNodesSelectable) { var i = e.getChildProperties(this.clickFlag).some(function (t) { return t === !1 }); e.cascadeFlag(this.clickFlag, i, this.clickFlagPredicate) } n = this.getNodeIdsWithFlag(this.clickFlag), this.draw() } else this.root.cascadeFlag(this.clickFlag, !1, this.clickFlagPredicate), (this.internalNodesSelectable || e.leaf) && (e.cascadeFlag(this.clickFlag, !0, this.clickFlagPredicate), n = e.getChildProperties("id")), this.draw(); else !this.unselectOnClickAway || this.dragging || r || (this.root.cascadeFlag(this.clickFlag, !1, this.clickFlagPredicate), this.draw()); this.pickedup || (this.dragging = !1), this.nodesUpdated(n, this.clickFlag) } } }, { key: "dblclicked", value: function (t) { if (!this.root) return !1; var e = this.getNodeAtMousePosition(t); e && (e.cascadeFlag("selected", !1), e.toggleCollapsed()), this.pickedup || (this.dragging = !1), this.draw() } }, { key: "displayLabels", value: function () { this.showLabels = !0, this.draw() } }, { key: "drag", value: function (t) { var e = x(this.canvas); if (!this.drawn) return !1; if (this.pickedup) { var n = (t.clientX - this.startx) * e, r = (t.clientY - this.starty) * e; Math.abs(n) + Math.abs(r) > 5 && (this.dragging = !0, this.offsetx = this.origx + n, this.offsety = this.origy + r, this.draw()) } else { var i = t, a = this.getNodeAtMousePosition(i); a && a.interactive && (this.internalNodesSelectable || a.leaf) ? (this.root.cascadeFlag("hovered", !1), a.hovered = !0, a.leaf || a.hasCollapsedAncestor() || this.tooltip.open(i.clientX, i.clientY, a), this.containerElement.style.cursor = "pointer") : (this.tooltip.close(), this.root.cascadeFlag("hovered", !1), this.containerElement.style.cursor = "auto"), this.draw() } } }, { key: "draw", value: function (t) { if (this.highlighters.length = 0, 0 === this.maxBranchLength) return void this.loadError(new Error("All branches in the tree are identical.")); this.canvas.restore(), this.canvas.clearRect(0, 0, this.canvas.canvas.width, this.canvas.canvas.height), this.canvas.lineCap = "round", this.canvas.lineJoin = "round", this.canvas.strokeStyle = this.branchColour, this.canvas.save(), this.drawn && !t || (this.prerenderer.run(this), t || this.fitInPanel()); var e = x(this.canvas); this.canvas.lineWidth = this.lineWidth / this.zoom, this.canvas.translate(this.offsetx * e, this.offsety * e), this.canvas.scale(this.zoom, this.zoom), this.branchRenderer.render(this, this.root), this.highlighters.forEach(function (t) { return t() }), this.drawn = !0 } }, { key: "drop", value: function () { return this.drawn ? void (this.pickedup = !1) : !1 } }, { key: "findLeaves", value: function (t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? "id" : arguments[1], n = [], r = !0, i = !1, a = void 0; try { for (var o, s = this.leaves[Symbol.iterator](); !(r = (o = s.next()).done); r = !0) { var l = o.value; l[e] && l[e].match(t) && n.push(l) } } catch (c) { i = !0, a = c } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } return n } }, { key: "updateLeaves", value: function (t, e, n) { var r = !0, i = !1, a = void 0; try { for (var o, s = this.leaves[Symbol.iterator](); !(r = (o = s.next()).done); r = !0) { var l = o.value; l[e] = !n } } catch (c) { i = !0, a = c } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } var h = !0, u = !1, f = void 0; try { for (var d, v = t[Symbol.iterator](); !(h = (d = v.next()).done); h = !0) { var p = d.value; p[e] = n } } catch (c) { u = !0, f = c } finally { try { !h && v["return"] && v["return"]() } finally { if (u) throw f } } this.nodesUpdated(t.map(function (t) { return t.id }), e) } }, { key: "clearSelect", value: function () { this.root.cascadeFlag("selected", !1), this.draw() } }, { key: "getPngUrl", value: function () { return this.canvas.canvas.toDataURL() } }, { key: "hideLabels", value: function () { this.showLabels = !1, this.draw() } }, { key: "load", value: function (t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], n = arguments[2], r = e, i = n; if ("function" == typeof e && (i = e, r = {}), i && (r.callback = i), r.format) return void this.build(t, g["default"][r.format], r); var a = !0, o = !1, s = void 0; try { for (var l, c = Object.keys(g["default"])[Symbol.iterator](); !(a = (l = c.next()).done); a = !0) { var h = l.value, u = g["default"][h]; if (t.match(u.fileExtension) || t.match(u.validator)) return void this.build(t, u, r) } } catch (f) { o = !0, s = f } finally { try { !a && c["return"] && c["return"]() } finally { if (o) throw s } } var d = new Error("String not recognised as a file or a parseable format string"); i && i(d), this.loadError(d) } }, { key: "saveOriginalTree", value: function () { this.originalTree.branches = this.branches, this.originalTree.leaves = this.leaves, this.originalTree.root = this.root, this.originalTree.branchLengths = {}, this.originalTree.parents = {} } }, { key: "clearState", value: function () { this.root = !1, this.leaves = [], this.branches = {}, this.drawn = !1 } }, { key: "saveState", value: function () { return this.extractNestedBranches(), this.root.branchLength = 0, this.maxBranchLength = 0, this.root.setTotalLength(), 0 === this.maxBranchLength ? void this.loadError(new Error("All branches in the tree are identical.")) : void 0 } }, { key: "build", value: function (t, e, n) { var r = this; this.originalTree = {}, this.clearState(), c["default"].lastId = 0; var i = new c["default"]; i.id = "root", this.branches.root = i, this.setRoot(i), e.parse({ formatString: t, root: i, options: n }, function (e) { return e ? (n.callback && n.callback(e), void r.loadError(e)) : (r.stringRepresentation = t, r.saveState(), r.setInitialCollapsedBranches(), r.draw(), r.saveOriginalTree(), n.callback && n.callback(), void r.loadCompleted()) }) } }, { key: "pickup", value: function (t) { return this.drawn ? (this.origx = this.offsetx, this.origy = this.offsety, 0 === t.button && (this.pickedup = !0), this.startx = t.clientX, void (this.starty = t.clientY)) : !1 } }, { key: "redrawFromBranch", value: function (t) { this.clearState(), this.resetTree(), this.originalTree.branchLengths[t.id] = t.branchLength, this.originalTree.parents[t.id] = t.parent, this.root = t, this.root.parent = !1, this.saveState(), this.draw(), this.subtreeDrawn(t.id) } }, { key: "redrawOriginalTree", value: function () { this.load(this.stringRepresentation) } }, { key: "storeNode", value: function (t) { if (t.id && "" !== t.id || (t.id = c["default"].generateId()), this.branches[t.id] && t !== this.branches[t.id]) { if (t.leaf) throw new Error("Two nodes on this tree share the id " + t.id); t.id = c["default"].generateId() } this.branches[t.id] = t, t.leaf && this.leaves.push(t) } }, { key: "scroll", value: function (t) { var e = this; if (t.preventDefault(), !(this._zooming || "wheelDelta" in t && 0 === t.wheelDelta)) { var n = t.detail < 0 || t.wheelDelta > 0 ? 1 : -1; if (this.branchScaling && (t.metaKey || t.ctrlKey)) this.currentBranchScale *= Math.pow(this.branchScalingStep, n), this.setBranchScale(this.currentBranchScale, { x: t.offsetX, y: t.offsetY }); else { var r = Math.log(this.zoom) / Math.log(10) + n * this.zoomFactor; this.setZoom(r, t.offsetX, t.offsetY) } this._zooming = !0, setTimeout(function () { e._zooming = !1 }, 128) } } }, { key: "selectNodes", value: function (t) { var e, n, r, i = t; if (this.root) { this.root.cascadeFlag("selected", !1), "string" == typeof t && (i = i.split(",")); for (n in this.branches) if (this.branches.hasOwnProperty(n)) for (e = this.branches[n], r = 0; r < i.length; r++)i[r] === e.id && e.cascadeFlag("selected", !0); this.draw() } } }, { key: "setFont", value: function (t) { isNaN(t) && (this.font = t, this.draw()) } }, { key: "setNodeDisplay", value: function (t, e, n) { var r = this; if (t) if (this.drawn) { var i = []; if (i = "string" == typeof t ? t.split(",") : t, i.length) { var a = !0, o = !1, s = void 0; try { for (var l, c = i[Symbol.iterator](); !(a = (l = c.next()).done); a = !0) { var h = l.value; h in this.branches && this.branches[h].setDisplay(e) } } catch (u) { o = !0, s = u } finally { try { !a && c["return"] && c["return"]() } finally { if (o) throw s } } this.draw() } } else n || !function () { var n = r, i = setInterval(function () { this.drawn && (n.setNodeColourAndShape(t, e, !0), clearInterval(i)) }) }() } }, { key: "setNodeSize", value: function (t) { this.baseNodeSize = Number(t), this.draw() } }, { key: "setRoot", value: function (t) { t.canvas = this.canvas, t.tree = this, this.root = t } }, { key: "setTextSize", value: function (t) { this.textSize = Number(t), this.draw() } }, { key: "setFontSize", value: function (t) { this.textSize = this.calculateFontSize ? this.calculateFontSize(t) : Math.min(t / 2, 15), this.canvas.font = this.textSize + "pt " + this.font } }, { key: "setTreeType", value: function (t, e) { if (!(t in v["default"])) return b(this.containerElement, "error", { error: new Error('"' + t + '" is not a known tree-type.') }); var n = this.treeType; this.treeType = t, this.branchRenderer = v["default"][t].branchRenderer, this.prerenderer = v["default"][t].prerenderer, this.labelAlign = v["default"][t].labelAlign, this.scaleCollapsedNode = v["default"][t].scaleCollapsedNode, this.calculateFontSize = v["default"][t].calculateFontSize, this.drawn && (this.drawn = !1, this.draw()), e || this.treeTypeChanged(n, t) } }, { key: "setSize", value: function (t, e) { this.canvas.canvas.width = t, this.canvas.canvas.height = e, this.navigator && this.navigator.resize(), this.adjustForPixelRatio() } }, { key: "setZoom", value: function (t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? this.canvas.canvas.width / 2 : arguments[1], n = arguments.length <= 2 || void 0 === arguments[2] ? this.canvas.canvas.height / 2 : arguments[2]; if (t > -2 && 2 > t) { var r = this.zoom, i = Math.pow(10, t); this.zoom = i, this.offsetx = this.calculateZoomedOffset(this.offsetx, e, r, i), this.offsety = this.calculateZoomedOffset(this.offsety, n, r, i), this.draw() } } }, { key: "calculateZoomedOffset", value: function (t, e, n, r) { return -1 * ((-1 * t + e) / n * r - e) } }, { key: "setBranchScale", value: function () { var t = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0], e = arguments.length <= 1 || void 0 === arguments[1] ? { x: this.canvas.canvas.width / 2, y: this.canvas.canvas.height / 2 } : arguments[1], n = v["default"][this.treeType]; if (n.branchScalingAxis && !(0 > t)) { var r = this.branchScalar; this.branchScalar = this.initialBranchScalar * t; var i = this.branchScalar / r, a = this["offset" + n.branchScalingAxis], o = e[n.branchScalingAxis], s = (e[n.branchScalingAxis] - a) * i + a; this["offset" + n.branchScalingAxis] += o - s, this.draw() } } }, { key: "toggleLabels", value: function () { this.showLabels = !this.showLabels, this.draw() } }, { key: "setMaxLabelLength", value: function () { var t; void 0 === this.maxLabelLength[this.treeType] && (this.maxLabelLength[this.treeType] = 0); for (var e = 0; e < this.leaves.length; e++)t = this.canvas.measureText(this.leaves[e].id), t.width > this.maxLabelLength[this.treeType] && (this.maxLabelLength[this.treeType] = t.width) } }, { key: "loadCompleted", value: function () { b(this.containerElement, "loaded") } }, { key: "loadStarted", value: function () { b(this.containerElement, "loading") } }, { key: "loadError", value: function (t) { b(this.containerElement, "error", { error: t }) } }, { key: "subtreeDrawn", value: function (t) { b(this.containerElement, "subtree", { node: t }) } }, { key: "nodesUpdated", value: function (t, e) { var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2]; b(this.containerElement, "updated", { nodeIds: t, property: e, append: n }) } }, { key: "addListener", value: function (t, e) { m(this.containerElement, t, e) } }, { key: "getBounds", value: function () { for (var t = this.root.startx, e = this.root.startx, n = this.root.starty, r = this.root.starty, i = this.leaves.length; i--;) { var a = this.leaves[i].getBounds(); t = Math.min(t, a.minx), e = Math.max(e, a.maxx), n = Math.min(n, a.miny), r = Math.max(r, a.maxy) } return [[t, n], [e, r]] } }, { key: "fitInPanel", value: function () { var t = [this.canvas.canvas.width - 2 * this.padding, this.canvas.canvas.height - 2 * this.padding], e = this.getBounds(), n = [e[1][0] - e[0][0], e[1][1] - e[0][1]], r = x(this.canvas), i = t[0] / n[0], a = t[1] / n[1]; this.zoom = Math.min(i, a), this.offsetx = -1 * e[0][0] * this.zoom, this.offsety = -1 * e[0][1] * this.zoom, i > a ? (this.offsetx += this.padding + (t[0] - n[0] * this.zoom) / 2, this.offsety += this.padding) : (this.offsetx += this.padding, this.offsety += this.padding + (t[1] - n[1] * this.zoom) / 2), this.offsetx = this.offsetx / r, this.offsety = this.offsety / r } }, { key: "adjustForPixelRatio", value: function () { var t = x(this.canvas); this.canvas.canvas.style.height = this.canvas.canvas.height + "px", this.canvas.canvas.style.width = this.canvas.canvas.width + "px", t > 1 && (this.canvas.canvas.width *= t, this.canvas.canvas.height *= t) } }, { key: "treeTypeChanged", value: function (t, e) { b(this.containerElement, "typechanged", { oldType: t, newType: e }) } }, { key: "resetTree", value: function () { if (this.originalTree.branches) { this.branches = this.originalTree.branches; var t = !0, e = !1, n = void 0; try { for (var r, i = Object.keys(this.originalTree.branchLengths)[Symbol.iterator](); !(t = (r = i.next()).done); t = !0) { var a = r.value; this.branches[a].branchLength = this.originalTree.branchLengths[a], this.branches[a].parent = this.originalTree.parents[a] } } catch (o) { e = !0, n = o } finally { try { !t && i["return"] && i["return"]() } finally { if (e) throw n } } this.leaves = this.originalTree.leaves, this.root = this.originalTree.root } } }, { key: "rotateBranch", value: function (t) { this.branches[t.id].rotate() } }, { key: "extractNestedBranches", value: function () { this.branches = {}, this.leaves = [], this.storeNode(this.root), this.root.extractChildren() } }, { key: "exportNwk", value: function () { var t = this.root.getNwk(); return t.substr(0, t.lastIndexOf(")") + 1) + ";" } }, { key: "resizeToContainer", value: function () { this.setSize(this.containerElement.offsetWidth, this.containerElement.offsetHeight) } }, { key: "alignLabels", get: function () { return this.showLabels && this.labelAlign && this.labelAlignEnabled }, set: function (t) { this.labelAlignEnabled = t } }]), t
                }(); e["default"] = S, S.prototype.on = S.prototype.addListener
            }, function (t, e, n) { "use strict"; function r(t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e["default"] = t, e } Object.defineProperty(e, "__esModule", { value: !0 }), e.events = e.dom = e.constants = e.canvas = void 0; var i = n(3), a = r(i), o = n(6), s = r(o), l = n(4), c = r(l), h = n(5), u = r(h); e.canvas = a, e.constants = s, e.dom = c, e.events = u }, function (t, e, n) { "use strict"; function r(t) { return t.backingStorePixelRatio || t.webkitBackingStorePixelRatio || t.mozBackingStorePixelRatio || t.msBackingStorePixelRatio || t.oBackingStorePixelRatio || 1 } function i(t) { return (window.devicePixelRatio || 1) / r(t) } function a(t, e) { var n = i(e.canvas); return [(t.offsetX - e.offsetx) / e.zoom * n, (t.offsetY - e.offsety) / e.zoom * n] } function o(t, e) { var n = t.x, r = t.y, a = i(e.canvas); return { x: n ? (n - e.offsetx) / e.zoom * a : null, y: r ? (r - e.offsety) / e.zoom * a : null } } function s(t, e) { var n = t.x, r = t.y, a = i(e.canvas); return { x: n ? n / a * e.zoom + e.offsetx : null, y: r ? r / a * e.zoom + e.offsety : null } } Object.defineProperty(e, "__esModule", { value: !0 }), e.getBackingStorePixelRatio = r, e.getPixelRatio = i, e.translateClick = a, e.translatePoint = o, e.undoPointTranslation = s; n(4) }, function (t, e, n) { "use strict"; function r(t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? "text/plain;charset=utf-8" : arguments[1], n = new Blob([t], { type: e }); return u.createObjectURL(n) } function i(t, e) { var n = document.createElement("a"), r = "undefined" != typeof n.download; n.href = t, n.target = "_blank", r && (n.download = e), (0, h.fireEvent)(n, "click"), r && u.revokeObjectURL(n.href) } function a(t) { for (var e = 0; t;)e += t.offsetLeft, t = t.offsetParent; return e } function o(t) { for (var e = 0; t;)e += t.offsetTop, t = t.offsetParent; return e } function s(t, e) { var n = t.className.split(" "); -1 === n.indexOf(e) && (n.push(e), t.className = n.join(" ")) } function l(t, e) { var n = t.className.split(" "), r = n.indexOf(e); -1 !== r && (n.splice(r, 1), t.className = n.join(" ")) } function c(t, e) { var n = t.className.split(" "), r = n.indexOf(e); return -1 !== r } Object.defineProperty(e, "__esModule", { value: !0 }), e.createBlobUrl = r, e.setupDownloadLink = i, e.getX = a, e.getY = o, e.addClass = s, e.removeClass = l, e.hasClass = c; var h = n(5), u = window.URL || window.webkitURL }, function (t, e) { "use strict"; function n(t) { return t.preventDefault(), !1 } function r(t, e) { var n, r, i = arguments.length <= 2 || void 0 === arguments[2] ? {} : arguments[2]; document.createEvent ? (n = document.createEvent("HTMLEvents"), n.initEvent(e, !0, !0)) : (n = document.createEventObject(), n.eventType = e), n.eventName = e; for (r in i) i.hasOwnProperty(r) && (n[r] = i[r]); document.createEvent ? t.dispatchEvent(n) : t.fireEvent("on" + n.eventType, n) } function i(t, e, n) { t.addEventListener ? t.addEventListener(e, n, !1) : t.attachEvent("on" + e, function () { return n.call(t, window.event) }) } function a(t) { t.stopPropagation(), t.preventDefault() } function o(t, e) { var n; return n = ("undefined" == typeof e ? "undefined" : s(e)) === s("aaa") ? function (n) { return t[e] ? t[e](n) : void 0 } : function () { return e(t) } } Object.defineProperty(e, "__esModule", { value: !0 }); var s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol ? "symbol" : typeof t }; e.preventDefault = n, e.fireEvent = r, e.addEvent = i, e.killEvent = a, e.createHandler = o }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.Angles = { FORTYFIVE: Math.PI / 4, QUARTER: Math.PI / 2, HALF: Math.PI, FULL: 2 * Math.PI }, e.Shapes = { x: "star", s: "square", o: "circle", t: "triangle" } }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } function i(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }); var a = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var r = e[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } return function (e, n, r) { return n && t(e.prototype, n), r && t(e, r), e } }(), o = n(2), s = n(8), l = r(s), c = o.constants.Angles, h = o.constants.Shapes, u = { minx: 0, maxx: 0, miny: 0, maxy: 0 }, f = { lineWidth: null, strokeStyle: null, fillStyle: null }, d = function () { function t() { i(this, t), this.angle = 0, this.branchLength = !1, this.canvas = null, this.centerx = 0, this.centery = 0, this.children = [], this.collapsed = !1, this.colour = null, this.data = {}, this.highlighted = !1, this.hovered = !1, this.id = "", this.interx = 0, this.intery = 0, this.label = null, this.leaf = !0, this.maxChildAngle = 0, this.minChildAngle = c.FULL, this.nodeShape = "circle", this.parent = null, this.radius = 1, this.selected = !1, this.startx = 0, this.starty = 0, this.totalBranchLength = 0, this.tree = {}, this.pruned = !1, this.labelStyle = {}, this.interactive = !0, this.leafStyle = {} } return a(t, [{ key: "clicked", value: function (t, e) { var n, r; if (!this.dragging) { if (t < this.maxx && t > this.minx && e < this.maxy && e > this.miny) return this; for (n = this.children.length - 1; n >= 0; n--)if (r = this.children[n].clicked(t, e)) return r } } }, { key: "drawLabel", value: function () { var t = this.getTextSize(), e = this.getLabel(); this.canvas.font = this.getFontString(), this.labelWidth = this.canvas.measureText(e).width, void 0 === this.tree.maxLabelLength[this.tree.treeType] && (this.tree.maxLabelLength[this.tree.treeType] = 0), this.labelWidth > this.tree.maxLabelLength[this.tree.treeType] && (this.tree.maxLabelLength[this.tree.treeType] = this.labelWidth); var n = this.getLabelStartX(); this.tree.alignLabels && (n += Math.abs(this.tree.labelAlign.getLabelOffset(this))), this.angle > c.QUARTER && this.angle < c.HALF + c.QUARTER && (this.canvas.rotate(c.HALF), n = -n - 1 * this.labelWidth), this.canvas.beginPath(), this.canvas.fillStyle = this.getTextColour(), this.canvas.fillText(e, n, t / 2), this.canvas.closePath(), this.angle > c.QUARTER && this.angle < c.HALF + c.QUARTER && this.canvas.rotate(c.HALF) } }, { key: "setNodeDimensions", value: function (t, e, n) { var r = n; (n * this.tree.zoom < 5 || !this.leaf) && (r = 5 / this.tree.zoom), this.minx = t - r, this.maxx = t + r, this.miny = e - r, this.maxy = e + r } }, { key: "drawCollapsed", value: function (t, e) { var n = this.getChildProperties("id"), r = n.length; this.tree.scaleCollapsedNode && (r = this.tree.scaleCollapsedNode(r)), this.canvas.globalAlpha = .3, this.canvas.beginPath(), this.canvas.arc(t, e, r, 0, 2 * Math.PI, !1), this.canvas.fillStyle = this.tree.defaultCollapsed.color ? this.tree.defaultCollapsed.color : "purple", this.canvas.fill(), this.canvas.globalAlpha = 1, this.canvas.closePath() } }, { key: "drawLabelConnector", value: function () { var t = this.tree, e = t.highlightColour, n = t.labelAlign; this.canvas.save(), this.canvas.lineWidth = this.canvas.lineWidth / 4, this.canvas.strokeStyle = this.isHighlighted ? e : this.getColour(), this.canvas.beginPath(), this.canvas.moveTo(this.getRadius(), 0), this.canvas.lineTo(n.getLabelOffset(this) + this.getDiameter(), 0), this.canvas.stroke(), this.canvas.closePath(), this.canvas.restore() } }, { key: "drawLeaf", value: function () { var t = this.tree, e = t.alignLabels, n = t.canvas; e && this.drawLabelConnector(), n.save(), l["default"][this.nodeShape](n, this.getRadius(), this.getLeafStyle()), n.restore(), (this.tree.showLabels || this.tree.hoverLabel && this.isHighlighted) && this.drawLabel() } }, { key: "drawHighlight", value: function (t, e) { this.canvas.save(), this.canvas.beginPath(), this.canvas.strokeStyle = this.tree.highlightColour, this.canvas.lineWidth = this.getHighlightLineWidth(); var n = this.getHighlightRadius(); this.canvas.arc(t, e, n, 0, c.FULL, !1), this.canvas.stroke(), this.canvas.closePath(), this.canvas.restore() } }, { key: "drawNode", value: function () { var t = this.getRadius(), e = t, n = this.leaf ? e * Math.cos(this.angle) + this.centerx : this.centerx, r = this.leaf ? e * Math.sin(this.angle) + this.centery : this.centery; this.setNodeDimensions(n, r, t), this.collapsed ? this.drawCollapsed(n, r) : this.leaf && (this.canvas.save(), this.canvas.translate(this.centerx, this.centery), this.canvas.rotate(this.angle), this.drawLeaf(), this.canvas.restore()), this.isHighlighted && this.tree.highlighters.push(this.drawHighlight.bind(this, n, r)) } }, { key: "getChildProperties", value: function (t) { if (this.leaf) return [this[t]]; for (var e = [], n = 0; n < this.children.length; n++)e = e.concat(this.children[n].getChildProperties(t)); return e } }, { key: "getChildCount", value: function () { if (this.leaf) return 1; for (var t = 0, e = 0; e < this.children.length; e++)t += this.children[e].getChildCount(); return t } }, { key: "getChildYTotal", value: function () { if (this.leaf) return this.centery; for (var t = 0, e = 0; e < this.children.length; e++)t += this.children[e].getChildYTotal(); return t } }, { key: "cascadeFlag", value: function (t, e, n) { if ("undefined" == typeof this[t]) throw new Error("Unknown property: " + t); ("undefined" == typeof n || n(this, t, e)) && (this[t] = e); var r = !0, i = !1, a = void 0; try { for (var o, s = this.children[Symbol.iterator](); !(r = (o = s.next()).done); r = !0) { var l = o.value; l.cascadeFlag(t, e, n) } } catch (c) { i = !0, a = c } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } } }, { key: "reset", value: function () { var t, e; for (this.startx = 0, this.starty = 0, this.centerx = 0, this.centery = 0, this.angle = null, this.minChildAngle = c.FULL, this.maxChildAngle = 0, e = 0; e < this.children.length; e++)try { this.children[t].pcReset() } catch (n) { return n } } }, { key: "redrawTreeFromBranch", value: function () { this.tree.redrawFromBranch(this) } }, { key: "extractChildren", value: function () { var t = !0, e = !1, n = void 0; try { for (var r, i = this.children[Symbol.iterator](); !(t = (r = i.next()).done); t = !0) { var a = r.value; this.tree.storeNode(a), a.extractChildren() } } catch (o) { e = !0, n = o } finally { try { !t && i["return"] && i["return"]() } finally { if (e) throw n } } } }, { key: "hasCollapsedAncestor", value: function () { return this.parent ? this.parent.collapsed || this.parent.hasCollapsedAncestor() : !1 } }, { key: "collapse", value: function () { this.collapsed = this.leaf === !1 } }, { key: "expand", value: function () { this.collapsed = !1 } }, { key: "toggleCollapsed", value: function () { this.collapsed ? this.expand() : this.collapse() } }, { key: "setTotalLength", value: function () { var t; for (this.parent ? (this.totalBranchLength = this.parent.totalBranchLength + this.branchLength, this.totalBranchLength > this.tree.maxBranchLength && (this.tree.maxBranchLength = this.totalBranchLength)) : (this.totalBranchLength = this.branchLength, this.tree.maxBranchLength = this.totalBranchLength), t = 0; t < this.children.length; t++)this.children[t].setTotalLength() } }, { key: "addChild", value: function (t) { t.parent = this, t.canvas = this.canvas, t.tree = this.tree, this.leaf = !1, this.children.push(t) } }, { key: "getChildColours", value: function () { var t = []; return this.children.forEach(function (e) { var n = 0 === e.children.length ? e.colour : e.getColour(); -1 === t.indexOf(n) && t.push(n) }), t } }, { key: "getColour", value: function (t) { return this.selected ? this.tree.selectedColour : t || this.colour || this.tree.branchColour } }, { key: "getNwk", value: function () { var t = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0]; if (this.leaf) return this.label + ":" + this.branchLength; var e = this.children.map(function (t) { return t.getNwk(!1) }); return "(" + e.join(",") + "):" + this.branchLength + (t ? ";" : "") } }, { key: "getTextColour", value: function () { if (this.selected) return this.tree.selectedColour; if (this.isHighlighted) return this.tree.highlightColour; if (this.tree.backColour && this.children.length) { var t = this.getChildColours(); if (1 === t.length) return t[0] } return this.labelStyle.colour || this.colour || this.tree.branchColour } }, { key: "getLabel", value: function () { return void 0 !== this.label && null !== this.label ? this.label : "" } }, { key: "getTextSize", value: function () { return this.labelStyle.textSize || this.tree.textSize } }, { key: "getFontString", value: function () { var t = this.labelStyle.font || this.tree.font; return (this.labelStyle.format || "") + " " + this.getTextSize() + "pt " + t } }, { key: "getLabelSize", value: function () { return this.canvas.font = this.getFontString(), this.canvas.measureText(this.getLabel()).width } }, { key: "getRadius", value: function () { return this.leaf ? this.tree.baseNodeSize * this.radius : this.tree.baseNodeSize / this.radius } }, { key: "getDiameter", value: function () { return 2 * this.getRadius() } }, { key: "hasLabelConnector", value: function () { return this.tree.alignLabels ? this.tree.labelAlign.getLabelOffset(this) > this.getDiameter() : !1 } }, { key: "getLabelStartX", value: function () { var t = this.getLeafStyle(), e = t.lineWidth, n = this.hasLabelConnector(), r = this.getDiameter(); return this.isHighlighted && !n && (r += this.getHighlightSize() - this.getRadius()), this.isHighlighted || n || (r += e / 2), r + Math.min(this.tree.labelPadding, this.tree.labelPadding / this.tree.zoom) } }, { key: "getHighlightLineWidth", value: function () { return this.tree.highlightWidth / this.tree.zoom } }, { key: "getHighlightRadius", value: function () { var t = this.getHighlightLineWidth() * this.tree.highlightSize; return t += this.getLeafStyle().lineWidth / this.tree.highlightSize, this.leaf ? this.getRadius() + t : .666 * t } }, { key: "getHighlightSize", value: function () { return this.getHighlightRadius() + this.getHighlightLineWidth() } }, { key: "rotate", value: function (t) { for (var e = [], n = this.children.length; n--;)e.push(this.children[n]); this.children = e, t.preventredraw || (this.tree.extractNestedBranches(), this.tree.draw(!0)) } }, { key: "getChildNo", value: function () { return this.parent.children.indexOf(this) } }, { key: "setDisplay", value: function (t) { var e = t.colour, n = t.shape, r = t.size, i = t.leafStyle, a = t.labelStyle; e && (this.colour = e), n && (this.nodeShape = h[n] ? h[n] : n), r && (this.radius = r), i && (this.leafStyle = i), a && (this.labelStyle = a) } }, { key: "getTotalLength", value: function () { var t = this.getRadius(); return (this.tree.showLabels || this.tree.hoverLabel && this.isHighlighted) && (t += this.getLabelStartX() + this.getLabelSize()), t } }, { key: "getBounds", value: function () { var t = this.tree, e = t.alignLabels ? t.labelAlign.getX(this) : this.centerx, n = t.alignLabels ? t.labelAlign.getY(this) : this.centery, r = this.getRadius(), i = this.getTotalLength(), a = void 0, o = void 0, s = void 0, l = void 0; return this.angle > c.QUARTER && this.angle < c.HALF + c.QUARTER ? (a = e + i * Math.cos(this.angle), s = n + i * Math.sin(this.angle), o = e - r, l = n - r) : (a = e - r, s = n - r, o = e + i * Math.cos(this.angle), l = n + i * Math.sin(this.angle)), u.minx = Math.min(a, o, e - this.getHighlightSize()), u.miny = Math.min(s, l, n - this.getHighlightSize()), u.maxx = Math.max(a, o, e + this.getHighlightSize()), u.maxy = Math.max(s, l, n + this.getHighlightSize()), u } }, { key: "getLeafStyle", value: function () { var t = this.leafStyle, e = t.strokeStyle, n = t.fillStyle, r = this.tree.zoom; f.strokeStyle = this.getColour(e), f.fillStyle = this.getColour(n); var i = "undefined" != typeof this.leafStyle.lineWidth ? this.leafStyle.lineWidth : this.tree.lineWidth; return f.lineWidth = i / r, f } }, { key: "isHighlighted", get: function () { return this.highlighted || this.hovered } }], [{ key: "generateId", value: function () { return "pcn" + this.lastId++ } }]), t }(); d.lastId = 0, e["default"] = d }, function (t, e, n) { "use strict"; function r(t, e) { t.beginPath(), t.moveTo(0, 0), t.lineTo(e, 0), t.stroke(), t.closePath() } function i(t, e) { var n = e.lineWidth, r = e.strokeStyle, i = e.fillStyle; t.save(), t.lineWidth = n, t.strokeStyle = r, t.fillStyle = i, t.fill(), n > 0 && r !== i && t.stroke(), t.restore() } Object.defineProperty(e, "__esModule", { value: !0 }); var a = n(2), o = a.constants.Angles, s = function (t) { return t * Math.sqrt(2) }; e["default"] = { circle: function (t, e, n) { var a = Math.pow(s(e), 2), l = Math.sqrt(a / Math.PI); r(t, e - l), t.beginPath(), t.arc(e, 0, l, 0, o.FULL, !1), t.closePath(), i(t, n) }, square: function (t, e, n) { var a = s(e), o = e - a / 2; r(t, o), t.beginPath(), t.moveTo(o, 0), t.lineTo(o, a / 2), t.lineTo(o + a, a / 2), t.lineTo(o + a, -a / 2), t.lineTo(o, -a / 2), t.lineTo(o, 0), t.closePath(), i(t, n) }, star: function (t, e, n) { var a = e, o = 0, s = 5, l = e, c = .5 * l, h = Math.PI / s; r(t, l - c); var u = Math.PI / 2 * 3; t.beginPath(), t.moveTo(a, o - l); for (var f = 0; s > f; f++) { var d = a + Math.cos(u) * l, v = o + Math.sin(u) * l; t.lineTo(d, v), u += h, d = a + Math.cos(u) * c, v = o + Math.sin(u) * c, t.lineTo(d, v), u += h } t.lineTo(a, o - l), t.closePath(), i(t, n) }, triangle: function (t, e, n) { var a = 2 * e * Math.cos(30 * Math.PI / 180), o = Math.sqrt(3) / 2 * a, s = 1 / Math.sqrt(3) * (a / 2); r(t, e - s), t.beginPath(), t.moveTo(e, s), t.lineTo(e + a / 2, s), t.lineTo(e, -(o - s)), t.lineTo(e - a / 2, s), t.lineTo(e, s), t.closePath(), i(t, n) } } }, function (t, e) { "use strict"; function n(t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], n = e.className, r = void 0 === n ? "phylocanvas-tooltip" : n, i = e.element, a = void 0 === i ? document.createElement("div") : i, o = e.zIndex, s = void 0 === o ? 2e3 : o, l = e.parent, c = void 0 === l ? t.containerElement : l; this.tree = t, this.element = a, this.element.className = r, this.element.style.display = "none", this.element.style.position = "fixed", this.element.style.zIndex = s, this.closed = !0, c.appendChild(this.element) } function r(t, e) { n.call(this, t, e), this.element.style.background = "rgba(97, 97, 97, 0.9)", this.element.style.color = "#fff", this.element.style.cursor = "pointer", this.element.style.padding = "8px", this.element.style.marginTop = "16px", this.element.style.borderRadius = "2px", this.element.style.textAlign = "center", this.element.style.fontFamily = this.tree.font || "sans-serif", this.element.style.fontSize = "10px", this.element.style.fontWeight = "500" } Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = n, e.ChildNodesTooltip = r, n.prototype.close = function () { this.element.style.display = "none", this.closed = !0 }, n.prototype.open = function () { for (var t = arguments.length <= 0 || void 0 === arguments[0] ? 100 : arguments[0], e = arguments.length <= 1 || void 0 === arguments[1] ? 100 : arguments[1], n = arguments[2]; this.element.hasChildNodes();)this.element.removeChild(this.element.firstChild); this.createContent(n), this.element.style.top = e + "px", this.element.style.left = t + "px", this.element.style.display = "block", this.closed = !1 }, r.prototype = Object.create(n.prototype), r.prototype.constructor = r, r.prototype.createContent = function (t) { var e = document.createTextNode(t.getChildProperties("id").length); this.element.appendChild(e) } }, function (t, e) { "use strict"; function n(t) { this.tree = t, this.cel = document.createElement("canvas"), this.cel.id = this.tree.containerElement.id + "Navi", this.cel.style.zIndex = "100", this.cel.style.backgroundColor = "#FFFFFF", this.cel.width = this.tree.canvas.canvas.width / 3, this.cel.height = this.tree.canvas.canvas.height / 3, this.cel.style.position = "absolute", this.cel.style.bottom = "0px", this.cel.style.right = "0px", this.cel.style.border = "1px solid #CCCCCC", this.tree.containerElement.appendChild(this.cel), this.ctx = this.cel.getContext("2d"), this.ctx.translate(this.cel.width / 2, this.cel.height / 2), this.ctx.save() } n.prototype.drawFrame = function () { var t, e, n, r = this.cel.width, i = this.cel.height, a = r / 2, o = i / 2; this.ctx.restore(), this.ctx.save(), this.ctx.clearRect(-a, -o, r, i), this.ctx.strokeStyle = "rgba(180,180,255,1)", this.tree.drawn ? this.ctx.drawImage(this.img, -a, -o, this.cel.width, this.cel.height) : (t = this.tree.canvas.canvas.toDataURL(), this.img = document.createElement("img"), this.img.src = t, e = this, this.img.onload = function () { e.ctx.drawImage(e.img, -a, -o, e.cel.width, e.cel.height) }, this.baseOffsetx = this.tree.offsetx, this.baseOffsety = this.tree.offsety, this.baseZoom = this.tree.zoom), n = 1 / (this.tree.zoom / this.baseZoom), this.ctx.lineWidth = this.ctx.lineWidth / n, this.ctx.translate((this.baseOffsetx - this.tree.offsetx * n) * n, (this.baseOffsety - this.tree.offsety * n) * n), this.ctx.scale(n, n), this.ctx.strokeRect(-a, -o, r, i) }, n.prototype.resize = function () { this.cel.width = this.tree.canvas.canvas.width / 3, this.cel.height = this.tree.canvas.canvas.height / 3, this.ctx.translate(this.cel.width / 2, this.cel.height / 2), this.drawFrame() }, t.exports = n }, function (t, e, n) {
                "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(12), a = r(i), o = n(17), s = r(o), l = n(20), c = r(l), h = n(23), u = r(h), f = n(26), d = r(f);
                e["default"] = { rectangular: a["default"], circular: s["default"], radial: c["default"], diagonal: u["default"], hierarchical: d["default"] }
            }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(13), a = r(i), o = n(14), s = r(o), l = n(15), c = r(l), h = n(16), u = r(h), f = { getX: function (t) { return t.tree.farthestNodeFromRootX * t.tree.currentBranchScale }, getY: function (t) { return t.centery }, getLabelOffset: function (t) { return t.tree.farthestNodeFromRootX * t.tree.currentBranchScale - t.centerx } }; e["default"] = { branchRenderer: new a["default"](c["default"]), prerenderer: new s["default"](u["default"]), labelAlign: f, branchScalingAxis: "x" } }, function (t, e) { "use strict"; function n(t) { if (!t || !t.draw) throw new Error("`draw` function is required for branch renderers"); this.draw = t.draw, this.prepareChild = t.prepareChild } n.prototype.render = function (t, e, n) { var r; if (!n && e && (e.selected ? e.canvas.fillStyle = t.selectedColour : e.canvas.fillStyle = e.colour, e.canvas.strokeStyle = e.getColour(), this.draw(t, e), !e.pruned)) for (e.drawNode(), r = 0; r < e.children.length; r++)this.prepareChild && this.prepareChild(e, e.children[r]), this.render(t, e.children[r], e.collapsed || n) }, t.exports = n }, function (t, e) { "use strict"; function n(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }); var r = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var r = e[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } return function (e, n, r) { return n && t(e.prototype, n), r && t(e, r), e } }(), i = function () { function t(e) { n(this, t), this.getStep = e.getStep, this.calculate = e.calculate } return r(t, [{ key: "run", value: function (t) { var e = this.getStep(t); t.root.startx = 0, t.root.starty = 0, t.root.centerx = 0, t.root.centery = 0, t.farthestNodeFromRootX = 0, t.farthestNodeFromRootY = 0, t.currentBranchScale = 1, this.calculate(t, e), t.initialBranchScalar = t.branchScalar, t.root.startx = t.root.centerx, t.root.starty = t.root.centery, t.setFontSize(e), t.setMaxLabelLength() } }]), t }(); e["default"] = i }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = { draw: function (t, e) { var n = e.branchLength * t.branchScalar; e.angle = 0, e.parent && (e.centerx = e.startx + n), e.canvas.beginPath(), e.canvas.moveTo(e.startx, e.starty), e.canvas.lineTo(e.startx, e.centery), e.canvas.lineTo(e.centerx, e.centery), e.canvas.stroke(), e.canvas.closePath() }, prepareChild: function (t, e) { e.startx = t.centerx, e.starty = t.centery } } }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = { getStep: function (t) { return t.fillCanvas ? t.canvas.canvas.height / t.leaves.length : Math.max(t.canvas.canvas.height / t.leaves.length, t.leaves[0].getDiameter() + t.labelPadding) }, calculate: function (t, e) { t.branchScalar = t.canvas.canvas.width / t.maxBranchLength; for (var n = 0; n < t.leaves.length; n++) { t.leaves[n].angle = 0, t.leaves[n].centery = n > 0 ? t.leaves[n - 1].centery + e : 0, t.leaves[n].centerx = t.leaves[n].totalBranchLength * t.branchScalar, t.leaves[n].centerx > t.farthestNodeFromRootX && (t.farthestNodeFromRootX = t.leaves[n].centerx), t.leaves[n].centery > t.farthestNodeFromRootY && (t.farthestNodeFromRootY = t.leaves[n].centery); for (var r = t.leaves[n]; r.parent; r = r.parent) { var i = r.parent.children; r.parent.centery = (i[0].centery + i[i.length - 1].centery) / 2 } } } } }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(13), a = r(i), o = n(14), s = r(o), l = n(18), c = r(l), h = n(19), u = r(h), f = { getX: function (t) { return t.centerx + t.labelOffsetX + t.getDiameter() * Math.cos(t.angle) }, getY: function (t) { return t.centery + t.labelOffsetY + t.getDiameter() * Math.sin(t.angle) }, getLabelOffset: function (t) { return t.labelOffsetX / Math.cos(t.angle) } }; e["default"] = { branchRenderer: new a["default"](c["default"]), prerenderer: new s["default"](u["default"]), labelAlign: f, scaleCollapsedNode: function (t) { return t / 3 }, calculateFontSize: function (t) { return Math.min(10 * t + 4, 40) } } }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = { draw: function (t, e) { var n = e.totalBranchLength * t.branchScalar; e.canvas.beginPath(), e.canvas.moveTo(e.startx, e.starty), e.canvas.lineTo(e.centerx, e.centery), e.canvas.stroke(), e.canvas.closePath(), e.canvas.strokeStyle = e.getColour(), e.children.length > 1 && !e.collapsed && (e.canvas.beginPath(), e.canvas.arc(0, 0, n, e.minChildAngle, e.maxChildAngle, e.maxChildAngle < e.minChildAngle), e.canvas.stroke(), e.canvas.closePath()) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var r = n(2), i = r.constants.Angles; e["default"] = { getStep: function (t) { return i.FULL / t.leaves.length }, calculate: function (t, e) { t.branchScalar = Math.min(t.canvas.canvas.width, t.canvas.canvas.height) / t.maxBranchLength; var n = t.leaves.length * t.leaves[0].getDiameter() / i.FULL; t.branchScalar * t.maxBranchLength > n ? n = t.branchScalar * t.maxBranchLength : t.branchScalar = n / t.maxBranchLength; for (var r = 0; r < t.leaves.length; r++) { var a = t.leaves[r]; for (a.angle = e * r, a.startx = a.parent.totalBranchLength * t.branchScalar * Math.cos(a.angle), a.starty = a.parent.totalBranchLength * t.branchScalar * Math.sin(a.angle), a.centerx = a.totalBranchLength * t.branchScalar * Math.cos(a.angle), a.centery = a.totalBranchLength * t.branchScalar * Math.sin(a.angle), a.labelOffsetX = n * Math.cos(a.angle) - a.centerx, a.labelOffsetY = n * Math.sin(a.angle) - a.centery; a.parent && (0 === a.getChildNo() && (a.parent.angle = a.angle, a.parent.minChildAngle = a.angle), a.getChildNo() === a.parent.children.length - 1); a = a.parent)a.parent.maxChildAngle = a.angle, a.parent.angle = (a.parent.minChildAngle + a.parent.maxChildAngle) / 2, a.parent.startx = (a.parent.totalBranchLength - a.parent.branchLength) * t.branchScalar * Math.cos(a.parent.angle), a.parent.starty = (a.parent.totalBranchLength - a.parent.branchLength) * t.branchScalar * Math.sin(a.parent.angle), a.parent.centerx = a.parent.totalBranchLength * t.branchScalar * Math.cos(a.parent.angle), a.parent.centery = a.parent.totalBranchLength * t.branchScalar * Math.sin(a.parent.angle) } } } }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(13), a = r(i), o = n(14), s = r(o), l = n(21), c = r(l), h = n(22), u = r(h); e["default"] = { branchRenderer: new a["default"](c["default"]), prerenderer: new s["default"](u["default"]), scaleCollapsedNode: function (t) { return t / 7 }, calculateFontSize: function (t) { return Math.min(50 * t + 5, 15) } } }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = { draw: function (t, e) { e.canvas.beginPath(), e.canvas.moveTo(e.startx, e.starty), e.canvas.lineTo(e.centerx, e.centery), e.canvas.stroke(), e.canvas.closePath() } } }, function (t, e, n) { "use strict"; function r(t, e) { e.parent ? (e.startx = e.parent.centerx, e.starty = e.parent.centery) : (e.startx = 0, e.starty = 0), e.centerx = e.startx + e.branchLength * t.branchScalar * Math.cos(e.angle), e.centery = e.starty + e.branchLength * t.branchScalar * Math.sin(e.angle); for (var n = 0; n < e.children.length; n++)r(t, e.children[n]) } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), a = i.constants.Angles; e["default"] = { getStep: function (t) { return a.FULL / t.leaves.length }, calculate: function (t, e) { t.branchScalar = Math.min(t.canvas.canvas.width, t.canvas.canvas.height) / t.maxBranchLength; for (var n = 0; n < t.leaves.length; n += 1) { t.leaves[n].angle = e * n, t.leaves[n].centerx = t.leaves[n].totalBranchLength * t.branchScalar * Math.cos(t.leaves[n].angle), t.leaves[n].centery = t.leaves[n].totalBranchLength * t.branchScalar * Math.sin(t.leaves[n].angle); for (var i = t.leaves[n]; i.parent && (0 === i.getChildNo() && (i.parent.angle = 0), i.parent.angle += i.angle * i.getChildCount(), i.getChildNo() === i.parent.children.length - 1); i = i.parent)i.parent.angle = i.parent.angle / i.parent.getChildCount() } r(t, t.root) } } }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(13), a = r(i), o = n(14), s = r(o), l = n(24), c = r(l), h = n(25), u = r(h); e["default"] = { branchRenderer: new a["default"](c["default"]), prerenderer: new s["default"](u["default"]), calculateFontSize: function (t) { return Math.min(t / 2, 10) } } }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = { draw: function (t, e) { e.angle = 0, e.canvas.beginPath(), e.canvas.moveTo(e.startx, e.starty), e.canvas.lineTo(e.centerx, e.centery), e.canvas.stroke(), e.canvas.closePath() }, prepareChild: function (t, e) { e.startx = t.centerx, e.starty = t.centery } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var r = n(2), i = r.constants.Angles; e["default"] = { getStep: function (t) { return Math.max(t.canvas.canvas.height / t.leaves.length, t.leaves[0].getDiameter() + t.labelPadding) }, calculate: function (t, e) { for (var n = 0; n < t.leaves.length; n++) { t.leaves[n].centerx = 0, t.leaves[n].centery = n > 0 ? t.leaves[n - 1].centery + e : 0, t.leaves[n].angle = 0; for (var r = t.leaves[n]; r.parent && r.getChildNo() === r.parent.children.length - 1; r = r.parent) { r.parent.centery = r.parent.getChildYTotal() / r.parent.getChildCount(), r.parent.centerx = r.parent.children[0].centerx + (r.parent.children[0].centery - r.parent.centery) * Math.tan(i.FORTYFIVE); for (var a = 0; a < r.parent.children.length; a++)r.parent.children[a].startx = r.parent.centerx, r.parent.children[a].starty = r.parent.centery } } } } }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(13), a = r(i), o = n(14), s = r(o), l = n(27), c = r(l), h = n(28), u = r(h), f = { getX: function (t) { return t.centerx }, getY: function (t) { return t.tree.farthestNodeFromRootY * t.tree.currentBranchScale }, getLabelOffset: function (t) { return t.tree.farthestNodeFromRootY * t.tree.currentBranchScale - t.centery } }; e["default"] = { branchRenderer: new a["default"](c["default"]), prerenderer: new s["default"](u["default"]), labelAlign: f, branchScalingAxis: "y" } }, function (t, e) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = { draw: function (t, e) { var n = e.branchLength * t.branchScalar; e.parent && (e.centery = e.starty + n), e.canvas.beginPath(), e !== e.tree.root && (e.canvas.moveTo(e.startx, e.starty), e.canvas.lineTo(e.centerx, e.starty)), e.canvas.lineTo(e.centerx, e.centery), e.canvas.stroke(), e.canvas.closePath() }, prepareChild: function (t, e) { e.startx = t.centerx, e.starty = t.centery } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var r = n(2), i = r.constants.Angles; e["default"] = { getStep: function (t) { return t.fillCanvas ? t.canvas.canvas.width / t.leaves.length : Math.max(t.canvas.canvas.width / t.leaves.length, t.leaves[0].getDiameter() + t.labelPadding) }, calculate: function (t, e) { t.branchScalar = t.canvas.canvas.height / t.maxBranchLength; for (var n = 0; n < t.leaves.length; n++) { t.leaves[n].angle = i.QUARTER, t.leaves[n].centerx = n > 0 ? t.leaves[n - 1].centerx + e : 0, t.leaves[n].centery = t.leaves[n].totalBranchLength * t.branchScalar; for (var r = t.leaves[n]; r.parent && (0 === r.getChildNo() && (r.parent.centerx = r.centerx), r.getChildNo() === r.parent.children.length - 1); r = r.parent) { r.parent.angle = i.QUARTER, r.parent.centerx = (r.parent.centerx + r.centerx) / 2, r.parent.centery = r.parent.totalBranchLength * t.branchScalar; for (var a = 0; a < r.parent.children.length; a++)r.parent.children[a].startx = r.parent.centerx, r.parent.children[a].starty = r.parent.centery } t.leaves[n].centerx > t.farthestNodeFromRootX && (t.farthestNodeFromRootX = t.leaves[n].centerx), t.leaves[n].centery > t.farthestNodeFromRootY && (t.farthestNodeFromRootY = t.leaves[n].centery) } } } }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(30), a = r(i), o = n(31), s = r(o), l = n(32), c = r(l); e["default"] = { nexus: new a["default"](c["default"]), newick: new a["default"](s["default"]) } }, function (t, e) { "use strict"; function n(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }); var r = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var r = e[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } return function (e, n, r) { return n && t(e.prototype, n), r && t(e, r), e } }(), i = function () { function t(e) { var r = e.format, i = e.parseFn, a = e.fileExtension, o = e.validator; n(this, t), this.format = r, this.parseFn = i, this.fileExtension = a, this.validator = o } return r(t, [{ key: "parse", value: function (t, e) { var n = t.formatString, r = t.root, i = t.options, a = void 0 === i ? { validate: !0 } : i; return n.match(this.validator) || a.validate === !1 ? this.parseFn({ string: n, root: r, options: a }, e) : e(new Error('Format string does not validate as "' + this.format + '"')) } }]), t }(); e["default"] = i }, function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } function i(t) { return this === t } function a(t) { var e = "", n = !0, r = !1, a = void 0; try { for (var o, s = t[Symbol.iterator](); !(n = (o = s.next()).done); n = !0) { var l = o.value; if (p.some(i.bind(l))) break; e += l } } catch (c) { r = !0, a = c } finally { try { !n && s["return"] && s["return"]() } finally { if (r) throw a } } return e } function o(t, e) { var n = t.split("**"), r = {}; if (e.id = n[0], 1 !== n.length) { n = n[1].split("*"); for (var i = 0; i < n.length; i += 2) { var a = n[i + 1]; switch (n[i]) { case "nsz": r.size = window.parseInt(a); break; case "nsh": r.shape = a; break; case "ncol": r.colour = a } } e.setDisplay(r) } } function s(t) { var e = "", n = !0, r = !1, a = void 0; try { for (var o, s = t[Symbol.iterator](); !(n = (o = s.next()).done); n = !0) { var l = o.value; if (g.some(i.bind(l))) break; e += l } } catch (c) { r = !0, a = c } finally { try { !n && s["return"] && s["return"]() } finally { if (r) throw a } } return e } function l(t, e, n) { var r = a(e.slice(n)), i = n + r.length, l = ""; return r.match(/\*/) && o(r, t), ":" === e[i] ? (l = s(e.slice(i + 1)), t.branchLength = Math.max(parseFloat(l), 0)) : t.branchLength = 0, r && (t.label = r), t.id = r || u["default"].generateId(), i + l.length } function c(t, e) { for (var n = t.string, r = t.root, i = n.replace(/(\r|\n)/g, ""), a = r, o = 0; o < i.length; o++) { var s = void 0; switch (i[o]) { case "(": s = new u["default"], a.addChild(s), a = s; break; case ")": a = a.parent; break; case ",": s = new u["default"], a.parent.addChild(s), a = s; break; case ";": break; default: try { o = l(a, i, o) } catch (c) { return e(c) } } } return e() } Object.defineProperty(e, "__esModule", { value: !0 }); var h = n(7), u = r(h), f = "newick", d = /\.nwk$/, v = /^[\w\W\.\*\:(\),-\/]+;\s?$/gi, p = [":", ",", ")", ";"], g = [")", ",", ";"]; e["default"] = { format: f, fileExtension: d, validator: v, parseFn: c } }, function (t, e, n) { "use strict"; function r(t, e) { var n = t.string, r = t.root, a = t.options; if (!n.match(/BEGIN TREES/gi)) return e(new Error("The nexus file does not contain a tree block")); var o = a.name, s = n.match(/BEGIN TREES;[\S\s]+END;/i)[0].replace(/BEGIN TREES;\n/i, "").replace(/END;/i, ""), l = {}, c = s.match(/TRANSLATE[^;]+;/i); if (c && c.length) { c = c[0], s = s.replace(c, ""), c = c.replace(/translate|;/gi, ""); for (var h = c.split(","), u = 0; u < h.length; u++) { var f = h[u].trim().replace("\n", "").split(" "); f[0] && f[1] && (l[f[0].trim()] = f[1].trim()) } } for (var d = s.split("\n"), v = {}, p = 0; p < d.length; p++)if ("" !== d[p].trim()) { var g = d[p].replace(/tree\s/i, ""); o || (o = g.trim().match(/^\w+/)[0]), v[o] = g.trim().match(/[\S]*$/)[0] } return v[o] ? void (0, i.parseFn)({ string: v[o].trim(), root: r }, function (t) { if (t) return e(t); if (e(), l) { var n = !0, i = !1, a = void 0; try { for (var o, s = Object.keys(l)[Symbol.iterator](); !(n = (o = s.next()).done); n = !0) { var c = o.value, h = r.tree.branches, u = h[c]; delete h[c], u.id = l[c], h[u.id] = u } } catch (f) { i = !0, a = f } finally { try { !n && s["return"] && s["return"]() } finally { if (i) throw a } } r.tree.draw() } }) : new Error("tree " + o + " does not exist in this NEXUS file") } Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(31), a = "nexus", o = /\.n(ex|xs)$/, s = /^#NEXUS[\s\n;\w\W\.\*\:(\),-=\[\]\/&]+$/i; e["default"] = { parseFn: r, format: a, fileExtension: o, validator: s } }])
        })
    }, function (t, e, n) { !function (e, r) { t.exports = r(n(3)) }(this, function (t) { return function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "", e(0) }([function (t, e, n) { "use strict"; function r(t, e) { var n = t.url, r = t.method, i = t.data, a = new XMLHttpRequest; a.onreadystatechange = function () { 4 === a.readyState && e(a) }, a.open(r, n, !0), "GET" === r ? a.send() : a.send(i) } function i(t) { t(o.Tree, "build", function (t, e) { var n = this, i = a(e, 3), o = i[0], s = i[1], l = i[2]; l.ajax || o.match(s.fileExtension) ? r({ url: o, method: "GET" }, function (e) { if (e.status >= 400) { var r = new Error(e.responseText); return l.callback && l.callback(r), n.loadError(r) } t.call(n, e.responseText, s, l) }) : t.apply(this, e) }) } var a = function () { function t(t, e) { var n = [], r = !0, i = !1, a = void 0; try { for (var o, s = t[Symbol.iterator](); !(r = (o = s.next()).done) && (n.push(o.value), !e || n.length !== e); r = !0); } catch (l) { i = !0, a = l } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } return n } return function (e, n) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, n); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(); Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = i; var o = n(1) }, function (e, n) { e.exports = t }]) }) }, function (t, e, n) { !function (e, r) { t.exports = r(n(3)) }(this, function (t) { return function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "", e(0) }([function (t, e, n) { "use strict"; function r(t) { return t && t.__esModule ? t : { "default": t } } function i(t) { if (Array.isArray(t)) { for (var e = 0, n = Array(t.length); e < t.length; e++)n[e] = t[e]; return n } return Array.from(t) } function a(t) { t(s["default"], "createTree", function (t, e) { var n = t.apply(void 0, i(e)); return n.showMetadata = !1, n.selectedMetadataColumns = [], n.metadataXStep = 15, n.metadataHeadingDrawn = !1, n.colour1 = "rgba(206,16,16,1)", n.colour0 = "#ccc", n }), t(o.Tree, "draw", function (t, e) { t.apply(this, e), this.metadataHeadingDrawn = !1 }), t(o.Branch, "drawLeaf", function (t) { t.call(this), this.tree.showMetadata && this.drawMetadata() }), t(o.Branch, "getTotalSize", function (t) { var e = t.call(this); return this.tree.showMetadata && (e += this.tree.getMetadataColumnHeadings().length * this.tree.metadataXStep), e }) } Object.defineProperty(e, "__esModule", { value: !0 }), e["default"] = a; var o = n(1), s = r(o); o.Tree.prototype.viewMetadataColumns = function () { var t = arguments.length <= 0 || void 0 === arguments[0] ? this.getMetadataColumnHeadings() : arguments[0]; this.showMetadata = !0, this.selectedMetadataColumns = t, this.fitInPanel(), this.draw() }, o.Tree.prototype.getMetadataColumnHeadings = function () { for (var t = [], e = 0; e < this.leaves.length; e++)if (Object.keys(this.leaves[e].data).length > 0) { t = Object.keys(this.leaves[e].data); break } return t }, o.Tree.prototype.clearMetadata = function () { for (var t = 0; t < this.leaves.length; t++)Object.keys(this.leaves[t].data).length > 0 && (this.leaves[t].data = {}) }, o.Branch.prototype.drawMetadata = function () { var t = 0; (this.tree.showLabels || this.tree.hoverLabel && this.highlighted) && (t = this.tree.maxLabelLength[this.tree.treeType]); var e, n, r = this.getLabelStartX() + t, i = 0, a = [], o = this.tree.textSize, s = this.tree.metadataXStep / 2; this.tree.alignLabels && ("rectangular" === this.tree.treeType ? r += this.tree.farthestNodeFromRootX - this.centerx : "hierarchical" === this.tree.treeType && (r += this.tree.farthestNodeFromRootY - this.centery)), !this.tree.metadataHeadingDrawn && this.tree.alignLabels && "circular" !== this.tree.treeType && "radial" !== this.tree.treeType && (this.drawMetadataHeading(r, i), this.tree.metadataHeadingDrawn = !0); var l = this.tree.metadataXStep; if (Object.keys(this.data).length > 0) { for (this.canvas.beginPath(), a = this.tree.selectedMetadataColumns.length > 0 ? this.tree.selectedMetadataColumns : Object.keys(this.data), i -= o / 2, e = 0; e < a.length; e++)n = a[e], r += l, window.parseInt(this.data[n]) ? (this.canvas.fillStyle = this.tree.colour1, this.canvas.fillRect(r, i, s, o)) : 0 === window.parseInt(this.data[n]) && (this.canvas.fillStyle = this.tree.colour0, this.canvas.fillRect(r, i, s, o)); this.canvas.stroke(), this.canvas.closePath() } }, o.Branch.prototype.drawMetadataHeading = function (t, e) { var n, r, i; for (n = this.tree.selectedMetadataColumns.length > 0 ? this.tree.selectedMetadataColumns : Object.keys(this.data), this.canvas.font = "12px Sans-serif", this.canvas.fillStyle = "black", i = 0; i < n.length; i++)r = n[i], t += this.tree.metadataXStep, this.canvas.rotate(-Math.PI / 2), "rectangular" === this.tree.treeType ? (this.canvas.textAlign = "left", this.canvas.fillText(r, 20, t + 6)) : "hierarchical" === this.tree.treeType ? (this.canvas.textAlign = "right", this.canvas.fillText(r, -20, t + 8)) : "diagonal" === this.tree.treeType && (this.canvas.textAlign = "left", this.canvas.fillText(r, 20, t + 6)), this.canvas.rotate(Math.PI / 2) } }, function (e, n) { e.exports = t }]) }) }, function (t, e, n) { !function (e, r) { t.exports = r(n(3)) }(this, function (t) { return function (t) { function e(r) { if (n[r]) return n[r].exports; var i = n[r] = { exports: {}, id: r, loaded: !1 }; return t[r].call(i.exports, i, i.exports, e), i.loaded = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.p = "", e(0) }([function (t, e, n) { "use strict"; function r(t) { if (Array.isArray(t)) { for (var e = 0, n = Array(t.length); e < t.length; e++)n[e] = t[e]; return n } return Array.from(t) } function i(t) { var e = t.text, n = void 0 === e ? "link" : e, r = t.filename, i = void 0 === r ? "file" : r, a = t.href, o = document.createElement("a"); return o.appendChild(document.createTextNode(n)), o.href = a, o.download = i, o } function a(t) { var e = t.tree, n = t.filenames; return i({ text: this.text, filename: n.image, href: e.getPngUrl() }) } function o(t, e) { var n = t.tree, r = t.filenames; return i({ text: this.text, filename: r.leafLabels, href: g((e || n.root).getChildProperties("label").join("\n")) }) } function s(t, e) { var n = t.tree, r = t.filenames; return i({ text: this.text, filename: r.newick, href: g((e || n.root).getNwk()) }) } function l(t) { var e = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1], r = e.menuItems, i = void 0 === r ? y : r, a = e.branchMenuItems, o = void 0 === a ? b : a, s = e.unstyled, l = void 0 === s ? !1 : s, c = e.className, h = void 0 === c ? "" : c, u = e.parent, d = e.filenames, v = void 0 === d ? m : d; f.Tooltip.call(this, t, { className: ("phylocanvas-context-menu " + h).trim(), element: document.createElement("ul"), parent: u }), this.menuItems = i, this.branchMenuItems = o, this.filenames = v, l || n(2), this.element.addEventListener("click", function (t) { t.stopPropagation() }) } function c(t) { if (2 === t.button) { t.preventDefault(); var e = this.getNodeAtMousePosition(t); this.contextMenu.open(t.clientX, t.clientY, e && e.interactive ? e : null), this.contextMenu.closed = !1, this.tooltip.close() } } function h(t) { t(this, "createTree", function (t, e) { var n = t.apply(void 0, r(e)), i = u(e, 2), a = i[1], o = void 0 === a ? {} : a; return n.contextMenu = new l(n, o.contextMenu), n.addListener("contextmenu", c.bind(n)), n }), this.ContextMenu = l } Object.defineProperty(e, "__esModule", { value: !0 }), e.DEFAULT_BRANCH_MENU_ITEMS = e.DEFAULT_MENU_ITEMS = void 0; var u = function () { function t(t, e) { var n = [], r = !0, i = !1, a = void 0; try { for (var o, s = t[Symbol.iterator](); !(r = (o = s.next()).done) && (n.push(o.value), !e || n.length !== e); r = !0); } catch (l) { i = !0, a = l } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } return n } return function (e, n) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, n); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(); e["default"] = h; var f = n(1), d = f.utils.events, v = d.createHandler, p = d.preventDefault, g = f.utils.dom.createBlobUrl, y = e.DEFAULT_MENU_ITEMS = [[{ text: "Show/Hide Labels", handler: "toggleLabels" }, { text: "Align/Realign Labels", handler: function (t) { t.alignLabels = !t.alignLabels } }], [{ text: "Fit in Panel", handler: function (t) { t.fitInPanel() } }, { text: "Redraw Original Tree", handler: "redrawOriginalTree" }], [{ text: "Export Leaf Labels", element: o }, { text: "Export as Newick File", element: s }, { text: "Export as Image", element: a }]], b = e.DEFAULT_BRANCH_MENU_ITEMS = [[{ text: "Collapse/Expand Subtree", handler: function (t) { t.toggleCollapsed(), t.tree.draw() } }, { text: "Rotate Subtree", handler: "rotate" }], [{ text: "Redraw Subtree", handler: "redrawTreeFromBranch" }], [{ text: "Export Subtree Leaf Labels", element: o }, { text: "Export Subtree as Newick File", element: s }]], m = { image: "phylocanvas.png", leafLabels: "phylocanvas-leaf-labels.txt", newick: "phylocanvas.nwk" }; l.prototype = Object.create(f.Tooltip.prototype), l.prototype.constructor = l, l.prototype.createSublist = function (t, e) { var n = document.createElement("ul"), r = !0, i = !1, a = void 0; try { for (var o, s = t[Symbol.iterator](); !(r = (o = s.next()).done); r = !0) { var l = o.value, c = document.createElement("li"); l.element ? c.appendChild(l.element(this, e)) : (c.appendChild(document.createTextNode(l.text)), c.addEventListener("click", v(e || this.tree, l.handler))), c.addEventListener("click", v(this, "close")), c.addEventListener("contextmenu", p), n.appendChild(c) } } catch (h) { i = !0, a = h } finally { try { !r && s["return"] && s["return"]() } finally { if (i) throw a } } n.hasChildNodes() && this.element.appendChild(n) }, l.prototype.createContent = function (t) { var e = t ? this.branchMenuItems : this.menuItems, n = !0, r = !1, i = void 0; try { for (var a, o = e[Symbol.iterator](); !(n = (a = o.next()).done); n = !0) { var s = a.value; this.createSublist(s, t) } } catch (l) { r = !0, i = l } finally { try { !n && o["return"] && o["return"]() } finally { if (r) throw i } } document.body.addEventListener("click", v(this, "close")) } }, function (e, n) { e.exports = t }, function (t, e, n) { var r = n(3); "string" == typeof r && (r = [[t.id, r, ""]]), n(5)(r, {}), r.locals && (t.exports = r.locals) }, function (t, e, n) { e = t.exports = n(4)(), e.push([t.id, ".phylocanvas-context-menu,.phylocanvas-context-menu ul{list-style:outside none none;margin:0}.phylocanvas-context-menu{background:#fff;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);letter-spacing:0;list-style:outside none none;min-width:124px;padding:8px 0}.phylocanvas-context-menu ul{padding:0}.phylocanvas-context-menu ul+ul{border-top:1px solid #e0e0e0;margin-top:8px;padding-top:8px}.phylocanvas-context-menu li{padding:0 16px;outline-color:#bdbdbd;height:40px;line-height:40px;text-decoration:none;background-color:transparent;cursor:pointer;font-size:13px;font-family:Helvetica,Arial,sans-serif}.phylocanvas-context-menu li:focus,.phylocanvas-context-menu li:hover{background-color:#eee}.phylocanvas-context-menu a{display:block;margin:0 -16px;padding:0 16px}.phylocanvas-context-menu a,.phylocanvas-context-menu li{color:rgba(0,0,0,.87);text-decoration:none;white-space:nowrap}", ""]) }, function (t, e) { "use strict"; t.exports = function () { var t = []; return t.toString = function () { for (var t = [], e = 0; e < this.length; e++) { var n = this[e]; n[2] ? t.push("@media " + n[2] + "{" + n[1] + "}") : t.push(n[1]) } return t.join("") }, t.i = function (e, n) { "string" == typeof e && (e = [[null, e, ""]]); for (var r = {}, i = 0; i < this.length; i++) { var a = this[i][0]; "number" == typeof a && (r[a] = !0) } for (i = 0; i < e.length; i++) { var o = e[i]; "number" == typeof o[0] && r[o[0]] || (n && !o[2] ? o[2] = n : n && (o[2] = "(" + o[2] + ") and (" + n + ")"), t.push(o)) } }, t } }, function (t, e, n) { function r(t, e) { for (var n = 0; n < t.length; n++) { var r = t[n], i = d[r.id]; if (i) { i.refs++; for (var a = 0; a < i.parts.length; a++)i.parts[a](r.parts[a]); for (; a < r.parts.length; a++)i.parts.push(c(r.parts[a], e)) } else { for (var o = [], a = 0; a < r.parts.length; a++)o.push(c(r.parts[a], e)); d[r.id] = { id: r.id, refs: 1, parts: o } } } } function i(t) { for (var e = [], n = {}, r = 0; r < t.length; r++) { var i = t[r], a = i[0], o = i[1], s = i[2], l = i[3], c = { css: o, media: s, sourceMap: l }; n[a] ? n[a].parts.push(c) : e.push(n[a] = { id: a, parts: [c] }) } return e } function a(t, e) { var n = g(), r = m[m.length - 1]; if ("top" === t.insertAt) r ? r.nextSibling ? n.insertBefore(e, r.nextSibling) : n.appendChild(e) : n.insertBefore(e, n.firstChild), m.push(e); else { if ("bottom" !== t.insertAt) throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'."); n.appendChild(e) } } function o(t) { t.parentNode.removeChild(t); var e = m.indexOf(t); e >= 0 && m.splice(e, 1) } function s(t) { var e = document.createElement("style"); return e.type = "text/css", a(t, e), e } function l(t) { var e = document.createElement("link"); return e.rel = "stylesheet", a(t, e), e } function c(t, e) { var n, r, i; if (e.singleton) { var a = b++; n = y || (y = s(e)), r = h.bind(null, n, a, !1), i = h.bind(null, n, a, !0) } else t.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (n = l(e), r = f.bind(null, n), i = function () { o(n), n.href && URL.revokeObjectURL(n.href) }) : (n = s(e), r = u.bind(null, n), i = function () { o(n) }); return r(t), function (e) { if (e) { if (e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap) return; r(t = e) } else i() } } function h(t, e, n, r) { var i = n ? "" : r.css; if (t.styleSheet) t.styleSheet.cssText = x(e, i); else { var a = document.createTextNode(i), o = t.childNodes; o[e] && t.removeChild(o[e]), o.length ? t.insertBefore(a, o[e]) : t.appendChild(a) } } function u(t, e) { var n = e.css, r = e.media; if (r && t.setAttribute("media", r), t.styleSheet) t.styleSheet.cssText = n; else { for (; t.firstChild;)t.removeChild(t.firstChild); t.appendChild(document.createTextNode(n)) } } function f(t, e) { var n = e.css, r = e.sourceMap; r && (n += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(r)))) + " */"); var i = new Blob([n], { type: "text/css" }), a = t.href; t.href = URL.createObjectURL(i), a && URL.revokeObjectURL(a) } var d = {}, v = function (t) { var e; return function () { return "undefined" == typeof e && (e = t.apply(this, arguments)), e } }, p = v(function () { return /msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase()) }), g = v(function () { return document.head || document.getElementsByTagName("head")[0] }), y = null, b = 0, m = []; t.exports = function (t, e) { e = e || {}, "undefined" == typeof e.singleton && (e.singleton = p()), "undefined" == typeof e.insertAt && (e.insertAt = "bottom"); var n = i(t); return r(n, e), function (t) { for (var a = [], o = 0; o < n.length; o++) { var s = n[o], l = d[s.id]; l.refs-- , a.push(l) } if (t) { var c = i(t); r(c, e) } for (var o = 0; o < a.length; o++) { var l = a[o]; if (0 === l.refs) { for (var h = 0; h < l.parts.length; h++)l.parts[h](); delete d[l.id] } } } }; var x = function () { var t = []; return function (e, n) { return t[e] = n, t.filter(Boolean).join("\n") } }() }]) }) }])
});